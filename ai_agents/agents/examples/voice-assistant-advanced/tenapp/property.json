{
  "ten": {
    "log": {
      "handlers": [
        {
          "matchers": [
            {
              "level": "debug"
            }
          ],
          "formatter": {
            "type": "plain",
            "colored": false
          },
          "emitter": {
            "type": "console",
            "config": {
              "stream": "stdout"
            }
          }
        }
      ]
    },
    "predefined_graphs": [
      {
        "name": "flux_apollo_gpt_4o_cartesia",
        "auto_start": false,
        "graph": {
          "nodes": [
            {
              "type": "extension",
              "name": "agora_rtc",
              "addon": "agora_rtc",
              "extension_group": "default",
              "property": {
                "app_id": "${env:AGORA_APP_ID}",
                "app_certificate": "${env:AGORA_APP_CERTIFICATE|}",
                "channel": "",
                "stream_id": 0,
                "remote_stream_id": 182837,
                "subscribe_audio": true,
                "publish_audio": true,
                "publish_data": true,
                "enable_agora_asr": false
              }
            },
            {
              "type": "extension",
              "name": "stt",
              "addon": "deepgram_ws_asr_python",
              "extension_group": "stt",
              "property": {
                "params": {
                  "api_key": "${env:DEEPGRAM_API_KEY}",
                  "url": "wss://api.deepgram.com/v2/listen",
                  "model": "flux-general-en",
                  "language": "en-US",
                  "interim_results": true,
                  "eot_threshold": 0.73,
                  "eot_timeout_ms": 2500,
                  "eager_eot_threshold": 0.0
                }
              }
            },
            {
              "type": "extension",
              "name": "llm",
              "addon": "openai_llm2_python",
              "extension_group": "chatgpt",
              "property": {
                "base_url": "https://api.openai.com/v1",
                "api_key": "${env:OPENAI_API_KEY}",
                "frequency_penalty": 0.9,
                "model": "gpt-4o",
                "max_tokens": 1000,
                "prompt": "You are a mental wellness research assistant conducting a demonstration. Guide the conversation efficiently:\n\nWORD LIMITS:\n- Steps 1-5 (data gathering): MAX 15 WORDS per response\n- Steps 7-8 (announcing results): MAX 15 WORDS of added context\n- Step 9 (therapeutic conversation): MAX 40 WORDS per response\n\nSPEECH FORMATTING: Avoid punctuation that sounds awkward when spoken - no slashes, parentheses, or abbreviations\n\n1. REQUIRED INFO GATE - You MUST collect ALL THREE: name, sex, and year of birth BEFORE anything else.\n   - Ask for all three upfront. If user does not provide all three, ask AGAIN for what is missing.\n   - DO NOT move to step 2 until you have name, sex, AND year of birth. Keep asking each turn until you have all three - never give up or skip.\n   - Once you have all three, respond warmly asking about their day. (MAX 15 WORDS)\n\n2. Ask: 'Tell me about your interests and hobbies.' (wait for response - aim for 20+ seconds total speech) (MAX 15 WORDS)\n\n3. Before moving to reading phase, MUST call check_phase_progress(name, year_of_birth, sex) with ALL THREE parameters filled in.\n   - NEVER call check_phase_progress without year_of_birth - the analysis WILL FAIL without it.\n   - Based on the result:\n   - If phase_complete=false: Ask another question to gather more speech (MAX 15 WORDS)\n   - If phase_complete=true: Say 'Thank you. Now please read aloud anything you can see around you - a book, article, or text on your screen - for about 15 seconds.' (MAX 15 WORDS)\n\n4. During reading phase:\n   a) ONLY call check_phase_progress AFTER a user message arrives - NEVER proactively\n   b) NEVER call check_phase_progress twice without a user message in between\n   c) After receiving the tool result:\n      - If reading_phase_complete=false: Say EXACTLY \"Please keep reading.\" (nothing more)\n      - If reading_phase_complete=true: Go to step 5 immediately\n   d) IGNORE the content of what the user says - treat everything as reading material\n\n5. When reading_phase_complete=true (confirmed via check_phase_progress):\n   - Say 'Perfect. I'm processing your responses now, this should take around 10 seconds.' (MAX 15 WORDS)\n   - NEVER say 'processing your responses' without first confirming reading_phase_complete=true\n\n6. You will receive TWO separate [SYSTEM ALERT] messages - one for wellness metrics, then another for clinical indicators.\n   - CRITICAL: Only respond to [SYSTEM ALERT] messages that are actually sent to you\n   - NEVER generate or say '[SYSTEM ALERT]' yourself - these come from the system only\n\n7. When you receive '[SYSTEM ALERT] Wellness metrics ready':\n   - Call get_wellness_metrics\n   - Announce the 5 wellness metrics as percentages in comma-separated format without numbering\n   - Example: 'Here are your wellness indicators: Stress: X%, Distress: Y%, Burnout: Z%, Fatigue: W%, Low self-esteem: V%'\n   - After the metrics, say: \"Please wait for the clinical indicators.\"\n   - After announcing, silently call confirm_announcement with phase='hellos'\n   - Then WAIT - do NOT call get_wellness_metrics again until next alert\n\n8. Later when you receive '[SYSTEM ALERT] Clinical indicators ready':\n   - Call get_wellness_metrics again\n   - If clinical_indicators field is MISSING from response: say \"Clinical indicators are not available due to an API issue\" - NEVER make up values\n   - If clinical_indicators field is PRESENT: Announce the 2 clinical indicators in comma-separated format without numbering\n   - Example: 'Clinical indicators: Depression: X% (severity), Anxiety: Y% (severity)'\n   - Keep any added context to MAX 15 WORDS\n   - After announcing results, silently call confirm_announcement with phase='apollo'\n\n9. THERAPEUTIC CONVERSATION - After both results announced:\n   - First, let user know: \"Feel free to chat as long as you like, or say goodbye whenever you're ready to end.\"\n   - DISCUSS THEIR ACTUAL METRICS:\n     a) Reference their specific scores: \"I noticed your stress level was quite high at X%. Would you like to talk about what might be contributing to that?\"\n     b) Prioritize discussing their highest scoring areas first\n     c) Validate their experience: \"It makes sense you might be feeling this way\"\n   - APPLY CBT TECHNIQUES based on their results:\n     a) For high stress/anxiety: Cognitive reframing - identify negative thought patterns, challenge catastrophic thinking, find balanced perspectives\n     b) For high depression/low mood: Behavioral activation - small achievable activities, breaking tasks into steps, scheduling pleasant events\n     c) For high fatigue/burnout: Boundary setting, energy management, identifying values vs obligations\n     d) For all: Thought records - \"What thought came up? What evidence supports or contradicts it? What's a more balanced view?\"\n   - Frame as research-based insights, not clinical diagnosis\n   - MAX 40 WORDS per response (allow slightly longer for therapeutic depth)\n   - Use warm, empathetic, curious tone\n   - Ask open questions to explore their experiences and thought patterns\n\n10. When user indicates they want to end, thank them warmly for participating\n\nNote: We need 20 seconds total speech (10s for mood/interests + 10s for reading) before analysis.",
                "proxy_url": "${env:OPENAI_PROXY_URL|}",
                "greeting": "Hi there! I would like to talk to you for a couple of minutes and use your voice to predict your mood and energy levels including any depression, anxiety, stress, and fatigue. Nothing will be recorded and this is purely a demonstration of what is possible now that we have trained our models with many hours of professionally labelled data. Please begin by telling me your name, sex and year of birth.",
                "max_memory_length": 10
              }
            },
            {
              "type": "extension",
              "name": "tts",
              "addon": "cartesia_tts",
              "extension_group": "tts",
              "property": {
                "dump": false,
                "dump_path": "./",
                "params": {
                  "api_key": "${env:CARTESIA_TTS_KEY}",
                  "model_id": "sonic-3",
                  "voice": {
                    "mode": "id",
                    "id": "71a7ad14-091c-4e8e-a314-022ece01c121"
                  },
                  "generation_config": {
                    "speed": 1
                  },
                  "output_format": {
                    "container": "raw",
                    "sample_rate": 44100
                  },
                  "language": "en"
                }
              }
            },
            {
              "type": "extension",
              "name": "thymia_analyzer",
              "addon": "thymia_analyzer_python",
              "extension_group": "default",
              "property": {
                "api_key": "${env:THYMIA_API_KEY}",
                "min_speech_duration": 10.0,
                "analysis_mode": "demo_dual",
                "apollo_mood_duration": 15.0,
                "apollo_read_duration": 15.0
              }
            },
            {
              "type": "extension",
              "name": "main_control",
              "addon": "main_python",
              "extension_group": "control",
              "property": {
                "greeting": "Hi there! I would like to talk to you for a couple of minutes and use your voice to predict your mood and energy levels including any depression, anxiety, stress, and fatigue. Nothing will be recorded and this is purely a demonstration of what is possible now that we have trained our models with many hours of professionally labelled data. Please begin by telling me your name, sex and year of birth."
              }
            },
            {
              "type": "extension",
              "name": "message_collector",
              "addon": "message_collector2",
              "extension_group": "transcriber",
              "property": {}
            },
            {
              "type": "extension",
              "name": "streamid_adapter",
              "addon": "streamid_adapter",
              "property": {}
            }
          ],
          "connections": [
            {
              "extension": "main_control",
              "cmd": [
                {
                  "names": [
                    "on_user_joined",
                    "on_user_left"
                  ],
                  "source": [
                    {
                      "extension": "agora_rtc"
                    }
                  ]
                },
                {
                  "names": [
                    "tool_register"
                  ],
                  "source": [
                    {
                      "extension": "thymia_analyzer"
                    }
                  ]
                },
                {
                  "name": "flush",
                  "source": [
                    {
                      "extension": "stt"
                    }
                  ]
                }
              ],
              "data": [
                {
                  "name": "asr_result",
                  "source": [
                    {
                      "extension": "stt"
                    }
                  ]
                },
                {
                  "name": "text_data",
                  "source": [
                    {
                      "extension": "thymia_analyzer"
                    }
                  ]
                }
              ]
            },
            {
              "extension": "agora_rtc",
              "audio_frame": [
                {
                  "name": "pcm_frame",
                  "source": [
                    {
                      "extension": "tts"
                    }
                  ]
                },
                {
                  "name": "pcm_frame",
                  "dest": [
                    {
                      "extension": "streamid_adapter"
                    },
                    {
                      "extension": "thymia_analyzer"
                    }
                  ]
                }
              ],
              "data": [
                {
                  "name": "data",
                  "source": [
                    {
                      "extension": "message_collector"
                    }
                  ]
                }
              ]
            },
            {
              "extension": "streamid_adapter",
              "audio_frame": [
                {
                  "name": "pcm_frame",
                  "dest": [
                    {
                      "extension": "stt"
                    }
                  ]
                }
              ]
            },
            {
              "extension": "stt",
              "cmd": [
                {
                  "name": "flush",
                  "dest": [
                    {
                      "extension": "main_control"
                    }
                  ]
                }
              ]
            },
            {
              "extension": "tts",
              "data": [
                {
                  "name": "text_data",
                  "source": [
                    {
                      "extension": "llm"
                    }
                  ]
                },
                {
                  "name": "tts_audio_start",
                  "dest": [
                    {
                      "extension": "thymia_analyzer"
                    }
                  ]
                },
                {
                  "name": "tts_audio_end",
                  "dest": [
                    {
                      "extension": "thymia_analyzer"
                    }
                  ]
                }
              ],
              "audio_frame": [
                {
                  "name": "pcm_frame",
                  "dest": [
                    {
                      "extension": "agora_rtc"
                    }
                  ]
                }
              ]
            }
          ]
        }
      },
      {
        "name": "flux_apollo_gpt_5_1_cartesia",
        "auto_start": false,
        "graph": {
          "nodes": [
            {
              "type": "extension",
              "name": "agora_rtc",
              "addon": "agora_rtc",
              "extension_group": "default",
              "property": {
                "app_id": "${env:AGORA_APP_ID}",
                "app_certificate": "${env:AGORA_APP_CERTIFICATE|}",
                "channel": "",
                "stream_id": 0,
                "remote_stream_id": 182837,
                "subscribe_audio": true,
                "publish_audio": true,
                "publish_data": true,
                "enable_agora_asr": false
              }
            },
            {
              "type": "extension",
              "name": "stt",
              "addon": "deepgram_ws_asr_python",
              "extension_group": "stt",
              "property": {
                "params": {
                  "api_key": "${env:DEEPGRAM_API_KEY}",
                  "url": "wss://api.deepgram.com/v2/listen",
                  "model": "flux-general-en",
                  "language": "en-US",
                  "interim_results": true,
                  "eot_threshold": 0.73,
                  "eot_timeout_ms": 2500,
                  "eager_eot_threshold": 0.0
                }
              }
            },
            {
              "type": "extension",
              "name": "llm",
              "addon": "openai_llm2_python",
              "extension_group": "chatgpt",
              "property": {
                "base_url": "https://api.openai.com/v1",
                "api_key": "${env:OPENAI_API_KEY}",
                "model": "gpt-5.1",
                "max_tokens": 1000,
                "prompt": "You are a mental wellness research assistant conducting a demonstration. Guide the conversation efficiently:\n\nWORD LIMITS:\n- Steps 1-5 (data gathering): MAX 15 WORDS per response\n- Steps 7-8 (announcing results): MAX 15 WORDS of added context\n- Step 9 (therapeutic conversation): MAX 40 WORDS per response\n\nSPEECH FORMATTING: Avoid punctuation that sounds awkward when spoken - no slashes, parentheses, or abbreviations\n\n1. REQUIRED INFO GATE - You MUST collect ALL THREE: name, sex, and year of birth BEFORE anything else.\n   - Ask for all three upfront. If user does not provide all three, ask AGAIN for what is missing.\n   - DO NOT move to step 2 until you have name, sex, AND year of birth. Keep asking each turn until you have all three - never give up or skip.\n   - Once you have all three, respond warmly asking about their day. (MAX 15 WORDS)\n\n2. Ask: 'Tell me about your interests and hobbies.' (wait for response - aim for 20+ seconds total speech) (MAX 15 WORDS)\n\n3. Before moving to reading phase, MUST call check_phase_progress(name, year_of_birth, sex) with ALL THREE parameters filled in.\n   - NEVER call check_phase_progress without year_of_birth - the analysis WILL FAIL without it.\n   - Based on the result:\n   - If phase_complete=false: Ask another question to gather more speech (MAX 15 WORDS)\n   - If phase_complete=true: Say 'Thank you. Now please read aloud anything you can see around you - a book, article, or text on your screen - for about 15 seconds.' (MAX 15 WORDS)\n\n4. During reading phase:\n   a) ONLY call check_phase_progress AFTER a user message arrives - NEVER proactively\n   b) NEVER call check_phase_progress twice without a user message in between\n   c) After receiving the tool result:\n      - If reading_phase_complete=false: Say EXACTLY \"Please keep reading.\" (nothing more)\n      - If reading_phase_complete=true: Go to step 5 immediately\n   d) IGNORE the content of what the user says - treat everything as reading material\n\n5. When reading_phase_complete=true (confirmed via check_phase_progress):\n   - Say 'Perfect. I'm processing your responses now, this should take around 10 seconds.' (MAX 15 WORDS)\n   - NEVER say 'processing your responses' without first confirming reading_phase_complete=true\n\n6. You will receive TWO separate [SYSTEM ALERT] messages - one for wellness metrics, then another for clinical indicators.\n   - CRITICAL: Only respond to [SYSTEM ALERT] messages that are actually sent to you\n   - NEVER generate or say '[SYSTEM ALERT]' yourself - these come from the system only\n\n7. When you receive '[SYSTEM ALERT] Wellness metrics ready':\n   - Call get_wellness_metrics\n   - Announce the 5 wellness metrics as percentages in comma-separated format without numbering\n   - Example: 'Here are your wellness indicators: Stress: X%, Distress: Y%, Burnout: Z%, Fatigue: W%, Low self-esteem: V%'\n   - After the metrics, say: \"Please wait for the clinical indicators.\"\n   - After announcing, silently call confirm_announcement with phase='hellos'\n   - Then WAIT - do NOT call get_wellness_metrics again until next alert\n\n8. Later when you receive '[SYSTEM ALERT] Clinical indicators ready':\n   - Call get_wellness_metrics again\n   - If clinical_indicators field is MISSING from response: say \"Clinical indicators are not available due to an API issue\" - NEVER make up values\n   - If clinical_indicators field is PRESENT: Announce the 2 clinical indicators in comma-separated format without numbering\n   - Example: 'Clinical indicators: Depression: X% (severity), Anxiety: Y% (severity)'\n   - Keep any added context to MAX 15 WORDS\n   - After announcing results, silently call confirm_announcement with phase='apollo'\n\n9. THERAPEUTIC CONVERSATION - After both results announced:\n   - First, let user know: \"Feel free to chat as long as you like, or say goodbye whenever you're ready to end.\"\n   - DISCUSS THEIR ACTUAL METRICS:\n     a) Reference their specific scores: \"I noticed your stress level was quite high at X%. Would you like to talk about what might be contributing to that?\"\n     b) Prioritize discussing their highest scoring areas first\n     c) Validate their experience: \"It makes sense you might be feeling this way\"\n   - APPLY CBT TECHNIQUES based on their results:\n     a) For high stress/anxiety: Cognitive reframing - identify negative thought patterns, challenge catastrophic thinking, find balanced perspectives\n     b) For high depression/low mood: Behavioral activation - small achievable activities, breaking tasks into steps, scheduling pleasant events\n     c) For high fatigue/burnout: Boundary setting, energy management, identifying values vs obligations\n     d) For all: Thought records - \"What thought came up? What evidence supports or contradicts it? What's a more balanced view?\"\n   - Frame as research-based insights, not clinical diagnosis\n   - MAX 40 WORDS per response (allow slightly longer for therapeutic depth)\n   - Use warm, empathetic, curious tone\n   - Ask open questions to explore their experiences and thought patterns\n\n10. When user indicates they want to end, thank them warmly for participating\n\nNote: We need 20 seconds total speech (10s for mood/interests + 10s for reading) before analysis.",
                "proxy_url": "${env:OPENAI_PROXY_URL|}",
                "greeting": "Hi there! I would like to talk to you for a couple of minutes and use your voice to predict your mood and energy levels including any depression, anxiety, stress, and fatigue. Nothing will be recorded and this is purely a demonstration of what is possible now that we have trained our models with many hours of professionally labelled data. Please begin by telling me your name, sex and year of birth.",
                "max_memory_length": 10,
                "use_max_completion_tokens": true,
                "reasoning_effort": "none",
                "verbosity": "low"
              }
            },
            {
              "type": "extension",
              "name": "tts",
              "addon": "cartesia_tts",
              "extension_group": "tts",
              "property": {
                "dump": false,
                "dump_path": "./",
                "params": {
                  "api_key": "${env:CARTESIA_TTS_KEY}",
                  "model_id": "sonic-3",
                  "voice": {
                    "mode": "id",
                    "id": "71a7ad14-091c-4e8e-a314-022ece01c121"
                  },
                  "generation_config": {
                    "speed": 1
                  },
                  "output_format": {
                    "container": "raw",
                    "sample_rate": 44100
                  },
                  "language": "en"
                }
              }
            },
            {
              "type": "extension",
              "name": "thymia_analyzer",
              "addon": "thymia_analyzer_python",
              "extension_group": "default",
              "property": {
                "api_key": "${env:THYMIA_API_KEY}",
                "min_speech_duration": 10.0,
                "analysis_mode": "demo_dual",
                "apollo_mood_duration": 15.0,
                "apollo_read_duration": 15.0
              }
            },
            {
              "type": "extension",
              "name": "main_control",
              "addon": "main_python",
              "extension_group": "control",
              "property": {
                "greeting": "Hi there! I would like to talk to you for a couple of minutes and use your voice to predict your mood and energy levels including any depression, anxiety, stress, and fatigue. Nothing will be recorded and this is purely a demonstration of what is possible now that we have trained our models with many hours of professionally labelled data. Please begin by telling me your name, sex and year of birth."
              }
            },
            {
              "type": "extension",
              "name": "message_collector",
              "addon": "message_collector2",
              "extension_group": "transcriber",
              "property": {}
            },
            {
              "type": "extension",
              "name": "streamid_adapter",
              "addon": "streamid_adapter",
              "property": {}
            }
          ],
          "connections": [
            {
              "extension": "main_control",
              "cmd": [
                {
                  "names": [
                    "on_user_joined",
                    "on_user_left"
                  ],
                  "source": [
                    {
                      "extension": "agora_rtc"
                    }
                  ]
                },
                {
                  "names": [
                    "tool_register"
                  ],
                  "source": [
                    {
                      "extension": "thymia_analyzer"
                    }
                  ]
                },
                {
                  "name": "flush",
                  "source": [
                    {
                      "extension": "stt"
                    }
                  ]
                }
              ],
              "data": [
                {
                  "name": "asr_result",
                  "source": [
                    {
                      "extension": "stt"
                    }
                  ]
                },
                {
                  "name": "text_data",
                  "source": [
                    {
                      "extension": "thymia_analyzer"
                    }
                  ]
                }
              ]
            },
            {
              "extension": "agora_rtc",
              "audio_frame": [
                {
                  "name": "pcm_frame",
                  "source": [
                    {
                      "extension": "tts"
                    }
                  ]
                },
                {
                  "name": "pcm_frame",
                  "dest": [
                    {
                      "extension": "streamid_adapter"
                    },
                    {
                      "extension": "thymia_analyzer"
                    }
                  ]
                }
              ],
              "data": [
                {
                  "name": "data",
                  "source": [
                    {
                      "extension": "message_collector"
                    }
                  ]
                }
              ]
            },
            {
              "extension": "streamid_adapter",
              "audio_frame": [
                {
                  "name": "pcm_frame",
                  "dest": [
                    {
                      "extension": "stt"
                    }
                  ]
                }
              ]
            },
            {
              "extension": "stt",
              "cmd": [
                {
                  "name": "flush",
                  "dest": [
                    {
                      "extension": "main_control"
                    }
                  ]
                }
              ]
            },
            {
              "extension": "tts",
              "data": [
                {
                  "name": "text_data",
                  "source": [
                    {
                      "extension": "llm"
                    }
                  ]
                },
                {
                  "name": "tts_audio_start",
                  "dest": [
                    {
                      "extension": "thymia_analyzer"
                    }
                  ]
                },
                {
                  "name": "tts_audio_end",
                  "dest": [
                    {
                      "extension": "thymia_analyzer"
                    }
                  ]
                }
              ],
              "audio_frame": [
                {
                  "name": "pcm_frame",
                  "dest": [
                    {
                      "extension": "agora_rtc"
                    }
                  ]
                }
              ]
            }
          ]
        }
      },
      {
        "name": "flux_apollo_gpt_5_1_cartesia_heygen",
        "auto_start": false,
        "graph": {
          "nodes": [
            {
              "type": "extension",
              "name": "agora_rtc",
              "addon": "agora_rtc",
              "extension_group": "default",
              "property": {
                "app_id": "${env:AGORA_APP_ID}",
                "app_certificate": "${env:AGORA_APP_CERTIFICATE|}",
                "channel": "",
                "stream_id": 0,
                "remote_stream_id": 182837,
                "subscribe_audio": true,
                "publish_audio": true,
                "publish_data": true,
                "enable_agora_asr": false
              }
            },
            {
              "type": "extension",
              "name": "stt",
              "addon": "deepgram_ws_asr_python",
              "extension_group": "stt",
              "property": {
                "params": {
                  "api_key": "${env:DEEPGRAM_API_KEY}",
                  "url": "wss://api.deepgram.com/v2/listen",
                  "model": "flux-general-en",
                  "language": "en-US",
                  "interim_results": true,
                  "eot_threshold": 0.73,
                  "eot_timeout_ms": 2500,
                  "eager_eot_threshold": 0.0
                }
              }
            },
            {
              "type": "extension",
              "name": "llm",
              "addon": "openai_llm2_python",
              "extension_group": "chatgpt",
              "property": {
                "base_url": "https://api.openai.com/v1",
                "api_key": "${env:OPENAI_API_KEY}",
                "model": "gpt-5.1",
                "max_tokens": 1000,
                "prompt": "You are a mental wellness research assistant conducting a demonstration. Guide the conversation efficiently:\n\nWORD LIMITS:\n- Steps 1-5 (data gathering): MAX 15 WORDS per response\n- Steps 7-8 (announcing results): MAX 15 WORDS of added context\n- Step 9 (therapeutic conversation): MAX 40 WORDS per response\n\nSPEECH FORMATTING: Avoid punctuation that sounds awkward when spoken - no slashes, parentheses, or abbreviations\n\n1. REQUIRED INFO GATE - You MUST collect ALL THREE: name, sex, and year of birth BEFORE anything else.\n   - Ask for all three upfront. If user does not provide all three, ask AGAIN for what is missing.\n   - DO NOT move to step 2 until you have name, sex, AND year of birth. Keep asking each turn until you have all three - never give up or skip.\n   - Once you have all three, respond warmly asking about their day. (MAX 15 WORDS)\n\n2. Ask: 'Tell me about your interests and hobbies.' (wait for response - aim for 20+ seconds total speech) (MAX 15 WORDS)\n\n3. Before moving to reading phase, MUST call check_phase_progress(name, year_of_birth, sex) with ALL THREE parameters filled in.\n   - NEVER call check_phase_progress without year_of_birth - the analysis WILL FAIL without it.\n   - Based on the result:\n   - If phase_complete=false: Ask another question to gather more speech (MAX 15 WORDS)\n   - If phase_complete=true: Say 'Thank you. Now please read aloud anything you can see around you - a book, article, or text on your screen - for about 15 seconds.' (MAX 15 WORDS)\n\n4. During reading phase:\n   a) ONLY call check_phase_progress AFTER a user message arrives - NEVER proactively\n   b) NEVER call check_phase_progress twice without a user message in between\n   c) After receiving the tool result:\n      - If reading_phase_complete=false: Say EXACTLY \"Please keep reading.\" (nothing more)\n      - If reading_phase_complete=true: Go to step 5 immediately\n   d) IGNORE the content of what the user says - treat everything as reading material\n\n5. When reading_phase_complete=true (confirmed via check_phase_progress):\n   - Say 'Perfect. I'm processing your responses now, this should take around 10 seconds.' (MAX 15 WORDS)\n   - NEVER say 'processing your responses' without first confirming reading_phase_complete=true\n\n6. You will receive TWO separate [SYSTEM ALERT] messages - one for wellness metrics, then another for clinical indicators.\n   - CRITICAL: Only respond to [SYSTEM ALERT] messages that are actually sent to you\n   - NEVER generate or say '[SYSTEM ALERT]' yourself - these come from the system only\n\n7. When you receive '[SYSTEM ALERT] Wellness metrics ready':\n   - Call get_wellness_metrics\n   - Announce the 5 wellness metrics as percentages in comma-separated format without numbering\n   - Example: 'Here are your wellness indicators: Stress: X%, Distress: Y%, Burnout: Z%, Fatigue: W%, Low self-esteem: V%'\n   - After the metrics, say: \"Please wait for the clinical indicators.\"\n   - After announcing, silently call confirm_announcement with phase='hellos'\n   - Then WAIT - do NOT call get_wellness_metrics again until next alert\n\n8. Later when you receive '[SYSTEM ALERT] Clinical indicators ready':\n   - Call get_wellness_metrics again\n   - If clinical_indicators field is MISSING from response: say \"Clinical indicators are not available due to an API issue\" - NEVER make up values\n   - If clinical_indicators field is PRESENT: Announce the 2 clinical indicators in comma-separated format without numbering\n   - Example: 'Clinical indicators: Depression: X% (severity), Anxiety: Y% (severity)'\n   - Keep any added context to MAX 15 WORDS\n   - After announcing results, silently call confirm_announcement with phase='apollo'\n\n9. THERAPEUTIC CONVERSATION - After both results announced:\n   - First, let user know: \"Feel free to chat as long as you like, or say goodbye whenever you're ready to end.\"\n   - DISCUSS THEIR ACTUAL METRICS:\n     a) Reference their specific scores: \"I noticed your stress level was quite high at X%. Would you like to talk about what might be contributing to that?\"\n     b) Prioritize discussing their highest scoring areas first\n     c) Validate their experience: \"It makes sense you might be feeling this way\"\n   - APPLY CBT TECHNIQUES based on their results:\n     a) For high stress/anxiety: Cognitive reframing - identify negative thought patterns, challenge catastrophic thinking, find balanced perspectives\n     b) For high depression/low mood: Behavioral activation - small achievable activities, breaking tasks into steps, scheduling pleasant events\n     c) For high fatigue/burnout: Boundary setting, energy management, identifying values vs obligations\n     d) For all: Thought records - \"What thought came up? What evidence supports or contradicts it? What's a more balanced view?\"\n   - Frame as research-based insights, not clinical diagnosis\n   - MAX 40 WORDS per response (allow slightly longer for therapeutic depth)\n   - Use warm, empathetic, curious tone\n   - Ask open questions to explore their experiences and thought patterns\n\n10. When user indicates they want to end, thank them warmly for participating\n\nNote: We need 20 seconds total speech (10s for mood/interests + 10s for reading) before analysis.",
                "proxy_url": "${env:OPENAI_PROXY_URL|}",
                "greeting": "Hi there! I would like to talk to you for a couple of minutes and use your voice to predict your mood and energy levels including any depression, anxiety, stress, and fatigue. Nothing will be recorded and this is purely a demonstration of what is possible now that we have trained our models with many hours of professionally labelled data. Please begin by telling me your name, sex and year of birth.",
                "max_memory_length": 10,
                "use_max_completion_tokens": true,
                "reasoning_effort": "none",
                "verbosity": "low"
              }
            },
            {
              "type": "extension",
              "name": "tts",
              "addon": "cartesia_tts",
              "extension_group": "tts",
              "property": {
                "dump": false,
                "dump_path": "./",
                "params": {
                  "api_key": "${env:CARTESIA_TTS_KEY}",
                  "model_id": "sonic-3",
                  "voice": {
                    "mode": "id",
                    "id": "71a7ad14-091c-4e8e-a314-022ece01c121"
                  },
                  "generation_config": {
                    "speed": 1
                  },
                  "output_format": {
                    "container": "raw",
                    "sample_rate": 44100
                  },
                  "language": "en"
                }
              }
            },
            {
              "type": "extension",
              "name": "thymia_analyzer",
              "addon": "thymia_analyzer_python",
              "extension_group": "default",
              "property": {
                "api_key": "${env:THYMIA_API_KEY}",
                "min_speech_duration": 10.0,
                "analysis_mode": "demo_dual",
                "apollo_mood_duration": 15.0,
                "apollo_read_duration": 15.0
              }
            },
            {
              "type": "extension",
              "name": "main_control",
              "addon": "main_python",
              "extension_group": "control",
              "property": {
                "greeting": "Hi there! I would like to talk to you for a couple of minutes and use your voice to predict your mood and energy levels including any depression, anxiety, stress, and fatigue. Nothing will be recorded and this is purely a demonstration of what is possible now that we have trained our models with many hours of professionally labelled data. Please begin by telling me your name, sex and year of birth."
              }
            },
            {
              "type": "extension",
              "name": "message_collector",
              "addon": "message_collector2",
              "extension_group": "transcriber",
              "property": {}
            },
            {
              "type": "extension",
              "name": "streamid_adapter",
              "addon": "streamid_adapter",
              "property": {}
            },
            {
              "type": "extension",
              "name": "avatar",
              "addon": "heygen_avatar_python",
              "extension_group": "default",
              "property": {
                "heygen_api_key": "${env:HEYGEN_API_KEY|}",
                "agora_appid": "${env:AGORA_APP_ID}",
                "agora_appcert": "${env:AGORA_APP_CERTIFICATE|}",
                "channel": "",
                "agora_avatar_uid": 12345,
                "input_audio_sample_rate": 44100,
                "avatar_name": "Katya_Chair_Sitting_public"
              }
            }
          ],
          "connections": [
            {
              "extension": "main_control",
              "cmd": [
                {
                  "names": [
                    "on_user_joined",
                    "on_user_left"
                  ],
                  "source": [
                    {
                      "extension": "agora_rtc"
                    }
                  ]
                },
                {
                  "names": [
                    "tool_register"
                  ],
                  "source": [
                    {
                      "extension": "thymia_analyzer"
                    }
                  ]
                },
                {
                  "name": "flush",
                  "source": [
                    {
                      "extension": "stt"
                    }
                  ]
                },
                {
                  "name": "flush",
                  "dest": [
                    {
                      "extension": "avatar"
                    }
                  ]
                }
              ],
              "data": [
                {
                  "name": "asr_result",
                  "source": [
                    {
                      "extension": "stt"
                    }
                  ]
                },
                {
                  "name": "text_data",
                  "source": [
                    {
                      "extension": "thymia_analyzer"
                    }
                  ]
                }
              ]
            },
            {
              "extension": "agora_rtc",
              "audio_frame": [
                {
                  "name": "pcm_frame",
                  "source": [
                    {
                      "extension": "avatar"
                    }
                  ]
                },
                {
                  "name": "pcm_frame",
                  "dest": [
                    {
                      "extension": "streamid_adapter"
                    },
                    {
                      "extension": "thymia_analyzer"
                    }
                  ]
                }
              ],
              "data": [
                {
                  "name": "data",
                  "source": [
                    {
                      "extension": "message_collector"
                    }
                  ]
                }
              ],
              "video_frame": [
                {
                  "name": "video_frame",
                  "source": [
                    {
                      "extension": "avatar"
                    }
                  ]
                }
              ]
            },
            {
              "extension": "streamid_adapter",
              "audio_frame": [
                {
                  "name": "pcm_frame",
                  "dest": [
                    {
                      "extension": "stt"
                    }
                  ]
                }
              ]
            },
            {
              "extension": "stt",
              "cmd": [
                {
                  "name": "flush",
                  "dest": [
                    {
                      "extension": "main_control"
                    }
                  ]
                }
              ]
            },
            {
              "extension": "tts",
              "data": [
                {
                  "name": "text_data",
                  "source": [
                    {
                      "extension": "llm"
                    }
                  ]
                },
                {
                  "name": "tts_audio_start",
                  "dest": [
                    {
                      "extension": "thymia_analyzer"
                    }
                  ]
                },
                {
                  "name": "tts_audio_end",
                  "dest": [
                    {
                      "extension": "thymia_analyzer"
                    },
                    {
                      "extension": "avatar"
                    }
                  ]
                }
              ],
              "audio_frame": [
                {
                  "name": "pcm_frame",
                  "dest": [
                    {
                      "extension": "avatar"
                    }
                  ]
                }
              ]
            },
            {
              "extension": "avatar",
              "audio_frame": [
                {
                  "name": "pcm_frame",
                  "source": [
                    {
                      "extension": "tts"
                    }
                  ]
                }
              ],
              "data": [
                {
                  "name": "tts_text_input",
                  "source": [
                    {
                      "extension": "main_control"
                    }
                  ]
                }
              ]
            }
          ]
        }
      },
      {
        "name": "flux_apollo_gpt_5_1_cartesia_anam",
        "auto_start": false,
        "graph": {
          "nodes": [
            {
              "type": "extension",
              "name": "agora_rtc",
              "addon": "agora_rtc",
              "extension_group": "default",
              "property": {
                "app_id": "${env:AGORA_APP_ID}",
                "app_certificate": "${env:AGORA_APP_CERTIFICATE|}",
                "channel": "",
                "stream_id": 0,
                "remote_stream_id": 182837,
                "subscribe_audio": true,
                "publish_audio": true,
                "publish_data": true,
                "enable_agora_asr": false
              }
            },
            {
              "type": "extension",
              "name": "stt",
              "addon": "deepgram_ws_asr_python",
              "extension_group": "stt",
              "property": {
                "params": {
                  "api_key": "${env:DEEPGRAM_API_KEY}",
                  "url": "wss://api.deepgram.com/v2/listen",
                  "model": "flux-general-en",
                  "language": "en-US",
                  "interim_results": true,
                  "eot_threshold": 0.73,
                  "eot_timeout_ms": 2500,
                  "eager_eot_threshold": 0.0
                }
              }
            },
            {
              "type": "extension",
              "name": "llm",
              "addon": "openai_llm2_python",
              "extension_group": "chatgpt",
              "property": {
                "base_url": "https://api.openai.com/v1",
                "api_key": "${env:OPENAI_API_KEY}",
                "model": "gpt-5.1",
                "max_tokens": 1000,
                "prompt": "You are a mental wellness research assistant conducting a demonstration. Guide the conversation efficiently:\n\nWORD LIMITS:\n- Steps 1-5 (data gathering): MAX 15 WORDS per response\n- Steps 7-8 (announcing results): MAX 15 WORDS of added context\n- Step 9 (therapeutic conversation): MAX 40 WORDS per response\n\nSPEECH FORMATTING: Avoid punctuation that sounds awkward when spoken - no slashes, parentheses, or abbreviations\n\n1. REQUIRED INFO GATE - You MUST collect ALL THREE: name, sex, and year of birth BEFORE anything else.\n   - Ask for all three upfront. If user does not provide all three, ask AGAIN for what is missing.\n   - DO NOT move to step 2 until you have name, sex, AND year of birth. Keep asking each turn until you have all three - never give up or skip.\n   - Once you have all three, respond warmly asking about their day. (MAX 15 WORDS)\n\n2. Ask: 'Tell me about your interests and hobbies.' (wait for response - aim for 20+ seconds total speech) (MAX 15 WORDS)\n\n3. Before moving to reading phase, MUST call check_phase_progress(name, year_of_birth, sex) with ALL THREE parameters filled in.\n   - NEVER call check_phase_progress without year_of_birth - the analysis WILL FAIL without it.\n   - Based on the result:\n   - If phase_complete=false: Ask another question to gather more speech (MAX 15 WORDS)\n   - If phase_complete=true: Say 'Thank you. Now please read aloud anything you can see around you - a book, article, or text on your screen - for about 15 seconds.' (MAX 15 WORDS)\n\n4. During reading phase:\n   a) ONLY call check_phase_progress AFTER a user message arrives - NEVER proactively\n   b) NEVER call check_phase_progress twice without a user message in between\n   c) After receiving the tool result:\n      - If reading_phase_complete=false: Say EXACTLY \"Please keep reading.\" (nothing more)\n      - If reading_phase_complete=true: Go to step 5 immediately\n   d) IGNORE the content of what the user says - treat everything as reading material\n\n5. When reading_phase_complete=true (confirmed via check_phase_progress):\n   - Say 'Perfect. I'm processing your responses now, this should take around 10 seconds.' (MAX 15 WORDS)\n   - NEVER say 'processing your responses' without first confirming reading_phase_complete=true\n\n6. You will receive TWO separate [SYSTEM ALERT] messages - one for wellness metrics, then another for clinical indicators.\n   - CRITICAL: Only respond to [SYSTEM ALERT] messages that are actually sent to you\n   - NEVER generate or say '[SYSTEM ALERT]' yourself - these come from the system only\n\n7. When you receive '[SYSTEM ALERT] Wellness metrics ready':\n   - Call get_wellness_metrics\n   - Announce the 5 wellness metrics as percentages in comma-separated format without numbering\n   - Example: 'Here are your wellness indicators: Stress: X%, Distress: Y%, Burnout: Z%, Fatigue: W%, Low self-esteem: V%'\n   - After the metrics, say: \"Please wait for the clinical indicators.\"\n   - After announcing, silently call confirm_announcement with phase='hellos'\n   - Then WAIT - do NOT call get_wellness_metrics again until next alert\n\n8. Later when you receive '[SYSTEM ALERT] Clinical indicators ready':\n   - Call get_wellness_metrics again\n   - If clinical_indicators field is MISSING from response: say \"Clinical indicators are not available due to an API issue\" - NEVER make up values\n   - If clinical_indicators field is PRESENT: Announce the 2 clinical indicators in comma-separated format without numbering\n   - Example: 'Clinical indicators: Depression: X% (severity), Anxiety: Y% (severity)'\n   - Keep any added context to MAX 15 WORDS\n   - After announcing results, silently call confirm_announcement with phase='apollo'\n\n9. THERAPEUTIC CONVERSATION - After both results announced:\n   - First, let user know: \"Feel free to chat as long as you like, or say goodbye whenever you're ready to end.\"\n   - DISCUSS THEIR ACTUAL METRICS:\n     a) Reference their specific scores: \"I noticed your stress level was quite high at X%. Would you like to talk about what might be contributing to that?\"\n     b) Prioritize discussing their highest scoring areas first\n     c) Validate their experience: \"It makes sense you might be feeling this way\"\n   - APPLY CBT TECHNIQUES based on their results:\n     a) For high stress/anxiety: Cognitive reframing - identify negative thought patterns, challenge catastrophic thinking, find balanced perspectives\n     b) For high depression/low mood: Behavioral activation - small achievable activities, breaking tasks into steps, scheduling pleasant events\n     c) For high fatigue/burnout: Boundary setting, energy management, identifying values vs obligations\n     d) For all: Thought records - \"What thought came up? What evidence supports or contradicts it? What's a more balanced view?\"\n   - Frame as research-based insights, not clinical diagnosis\n   - MAX 40 WORDS per response (allow slightly longer for therapeutic depth)\n   - Use warm, empathetic, curious tone\n   - Ask open questions to explore their experiences and thought patterns\n\n10. When user indicates they want to end, thank them warmly for participating\n\nNote: We need 20 seconds total speech (10s for mood/interests + 10s for reading) before analysis.",
                "proxy_url": "${env:OPENAI_PROXY_URL|}",
                "greeting": "Hi there! I would like to talk to you for a couple of minutes and use your voice to predict your mood and energy levels including any depression, anxiety, stress, and fatigue. Nothing will be recorded and this is purely a demonstration of what is possible now that we have trained our models with many hours of professionally labelled data. Please begin by telling me your name, sex and year of birth.",
                "max_memory_length": 10,
                "use_max_completion_tokens": true,
                "reasoning_effort": "none",
                "verbosity": "low"
              }
            },
            {
              "type": "extension",
              "name": "tts",
              "addon": "cartesia_tts",
              "extension_group": "tts",
              "property": {
                "dump": false,
                "dump_path": "./",
                "params": {
                  "api_key": "${env:CARTESIA_TTS_KEY}",
                  "model_id": "sonic-3",
                  "voice": {
                    "mode": "id",
                    "id": "71a7ad14-091c-4e8e-a314-022ece01c121"
                  },
                  "generation_config": {
                    "speed": 1
                  },
                  "output_format": {
                    "container": "raw",
                    "sample_rate": 44100
                  },
                  "language": "en"
                }
              }
            },
            {
              "type": "extension",
              "name": "thymia_analyzer",
              "addon": "thymia_analyzer_python",
              "extension_group": "default",
              "property": {
                "api_key": "${env:THYMIA_API_KEY}",
                "min_speech_duration": 10.0,
                "analysis_mode": "demo_dual",
                "apollo_mood_duration": 15.0,
                "apollo_read_duration": 15.0
              }
            },
            {
              "type": "extension",
              "name": "main_control",
              "addon": "main_python",
              "extension_group": "control",
              "property": {
                "greeting": "Hi there! I would like to talk to you for a couple of minutes and use your voice to predict your mood and energy levels including any depression, anxiety, stress, and fatigue. Nothing will be recorded and this is purely a demonstration of what is possible now that we have trained our models with many hours of professionally labelled data. Please begin by telling me your name, sex and year of birth."
              }
            },
            {
              "type": "extension",
              "name": "message_collector",
              "addon": "message_collector2",
              "extension_group": "transcriber",
              "property": {}
            },
            {
              "type": "extension",
              "name": "streamid_adapter",
              "addon": "streamid_adapter",
              "property": {}
            },
            {
              "type": "extension",
              "name": "avatar",
              "addon": "anam_avatar_python",
              "extension_group": "default",
              "property": {
                "anam_api_key": "${env:ANAM_API_KEY}",
                "anam_base_url": "https://api.anam.ai/v1",
                "anam_avatar_id": "960f614f-ea88-47c3-9883-f02094f70874",
                "anam_cluster": "",
                "anam_pod": "",
                "agora_appid": "${env:AGORA_APP_ID}",
                "agora_appcert": "${env:AGORA_APP_CERTIFICATE|}",
                "channel": "",
                "agora_video_uid": 123,
                "input_audio_sample_rate": 44100,
                "quality": "${env:VIDEO_QUALITY|high}",
                "video_encoding": "${env:VIDEO_ENCODING|H264}",
                "enable_string_uid": false,
                "activity_idle_timeout": 120
              }
            }
          ],
          "connections": [
            {
              "extension": "main_control",
              "cmd": [
                {
                  "names": [
                    "on_user_joined",
                    "on_user_left"
                  ],
                  "source": [
                    {
                      "extension": "agora_rtc"
                    }
                  ]
                },
                {
                  "names": [
                    "tool_register"
                  ],
                  "source": [
                    {
                      "extension": "thymia_analyzer"
                    }
                  ]
                },
                {
                  "name": "flush",
                  "source": [
                    {
                      "extension": "stt"
                    }
                  ]
                },
                {
                  "name": "flush",
                  "dest": [
                    {
                      "extension": "avatar"
                    }
                  ]
                }
              ],
              "data": [
                {
                  "name": "asr_result",
                  "source": [
                    {
                      "extension": "stt"
                    }
                  ]
                },
                {
                  "name": "text_data",
                  "source": [
                    {
                      "extension": "thymia_analyzer"
                    }
                  ]
                }
              ]
            },
            {
              "extension": "agora_rtc",
              "audio_frame": [
                {
                  "name": "pcm_frame",
                  "source": [
                    {
                      "extension": "avatar"
                    }
                  ]
                },
                {
                  "name": "pcm_frame",
                  "dest": [
                    {
                      "extension": "streamid_adapter"
                    },
                    {
                      "extension": "thymia_analyzer"
                    }
                  ]
                }
              ],
              "data": [
                {
                  "name": "data",
                  "source": [
                    {
                      "extension": "message_collector"
                    }
                  ]
                }
              ],
              "video_frame": [
                {
                  "name": "video_frame",
                  "source": [
                    {
                      "extension": "avatar"
                    }
                  ]
                }
              ]
            },
            {
              "extension": "streamid_adapter",
              "audio_frame": [
                {
                  "name": "pcm_frame",
                  "dest": [
                    {
                      "extension": "stt"
                    }
                  ]
                }
              ]
            },
            {
              "extension": "stt",
              "cmd": [
                {
                  "name": "flush",
                  "dest": [
                    {
                      "extension": "main_control"
                    }
                  ]
                }
              ]
            },
            {
              "extension": "tts",
              "data": [
                {
                  "name": "text_data",
                  "source": [
                    {
                      "extension": "llm"
                    }
                  ]
                },
                {
                  "name": "tts_audio_start",
                  "dest": [
                    {
                      "extension": "thymia_analyzer"
                    }
                  ]
                },
                {
                  "name": "tts_audio_end",
                  "dest": [
                    {
                      "extension": "thymia_analyzer"
                    },
                    {
                      "extension": "avatar"
                    }
                  ]
                }
              ],
              "audio_frame": [
                {
                  "name": "pcm_frame",
                  "dest": [
                    {
                      "extension": "avatar"
                    }
                  ]
                }
              ]
            },
            {
              "extension": "avatar",
              "audio_frame": [
                {
                  "name": "pcm_frame",
                  "source": [
                    {
                      "extension": "tts"
                    }
                  ]
                }
              ],
              "data": [
                {
                  "name": "tts_text_input",
                  "source": [
                    {
                      "extension": "main_control"
                    }
                  ]
                }
              ]
            }
          ]
        }
      },
      {
        "name": "flux_apollo_gpt_5_1_cartesia_anam2",
        "auto_start": false,
        "graph": {
          "nodes": [
            {
              "type": "extension",
              "name": "agora_rtc",
              "addon": "agora_rtc",
              "extension_group": "default",
              "property": {
                "app_id": "${env:AGORA_APP_ID}",
                "app_certificate": "${env:AGORA_APP_CERTIFICATE|}",
                "channel": "",
                "stream_id": 0,
                "remote_stream_id": 182837,
                "subscribe_audio": true,
                "publish_audio": true,
                "publish_data": true,
                "enable_agora_asr": false
              }
            },
            {
              "type": "extension",
              "name": "stt",
              "addon": "deepgram_ws_asr_python",
              "extension_group": "stt",
              "property": {
                "params": {
                  "api_key": "${env:DEEPGRAM_API_KEY}",
                  "url": "wss://api.deepgram.com/v2/listen",
                  "model": "flux-general-en",
                  "language": "en-US",
                  "interim_results": true,
                  "eot_threshold": 0.73,
                  "eot_timeout_ms": 2500,
                  "eager_eot_threshold": 0.0
                }
              }
            },
            {
              "type": "extension",
              "name": "llm",
              "addon": "openai_llm2_python",
              "extension_group": "chatgpt",
              "property": {
                "base_url": "https://api.openai.com/v1",
                "api_key": "${env:OPENAI_API_KEY}",
                "model": "gpt-5.1",
                "max_tokens": 1000,
                "prompt": "You are a mental wellness research assistant conducting a demonstration. Guide the conversation efficiently:\n\nWORD LIMITS:\n- Steps 1-5 (data gathering): MAX 15 WORDS per response\n- Steps 7-8 (announcing results): MAX 15 WORDS of added context\n- Step 9 (therapeutic conversation): MAX 40 WORDS per response\n\nSPEECH FORMATTING: Avoid punctuation that sounds awkward when spoken - no slashes, parentheses, or abbreviations\n\n1. REQUIRED INFO GATE - You MUST collect ALL THREE: name, sex, and year of birth BEFORE anything else.\n   - Ask for all three upfront. If user does not provide all three, ask AGAIN for what is missing.\n   - DO NOT move to step 2 until you have name, sex, AND year of birth. Keep asking each turn until you have all three - never give up or skip.\n   - Once you have all three, respond warmly asking about their day. (MAX 15 WORDS)\n\n2. Ask: 'Tell me about your interests and hobbies.' (wait for response - aim for 20+ seconds total speech) (MAX 15 WORDS)\n\n3. Before moving to reading phase, MUST call check_phase_progress(name, year_of_birth, sex) with ALL THREE parameters filled in.\n   - NEVER call check_phase_progress without year_of_birth - the analysis WILL FAIL without it.\n   - Based on the result:\n   - If phase_complete=false: Ask another question to gather more speech (MAX 15 WORDS)\n   - If phase_complete=true: Say 'Thank you. Now please read aloud anything you can see around you - a book, article, or text on your screen - for about 15 seconds.' (MAX 15 WORDS)\n\n4. During reading phase:\n   a) ONLY call check_phase_progress AFTER a user message arrives - NEVER proactively\n   b) NEVER call check_phase_progress twice without a user message in between\n   c) After receiving the tool result:\n      - If reading_phase_complete=false: Say EXACTLY \"Please keep reading.\" (nothing more)\n      - If reading_phase_complete=true: Go to step 5 immediately\n   d) IGNORE the content of what the user says - treat everything as reading material\n\n5. When reading_phase_complete=true (confirmed via check_phase_progress):\n   - Say 'Perfect. I'm processing your responses now, this should take around 10 seconds.' (MAX 15 WORDS)\n   - NEVER say 'processing your responses' without first confirming reading_phase_complete=true\n\n6. You will receive TWO separate [SYSTEM ALERT] messages - one for wellness metrics, then another for clinical indicators.\n   - CRITICAL: Only respond to [SYSTEM ALERT] messages that are actually sent to you\n   - NEVER generate or say '[SYSTEM ALERT]' yourself - these come from the system only\n\n7. When you receive '[SYSTEM ALERT] Wellness metrics ready':\n   - Call get_wellness_metrics\n   - Announce the 5 wellness metrics as percentages in comma-separated format without numbering\n   - Example: 'Here are your wellness indicators: Stress: X%, Distress: Y%, Burnout: Z%, Fatigue: W%, Low self-esteem: V%'\n   - After the metrics, say: \"Please wait for the clinical indicators.\"\n   - After announcing, silently call confirm_announcement with phase='hellos'\n   - Then WAIT - do NOT call get_wellness_metrics again until next alert\n\n8. Later when you receive '[SYSTEM ALERT] Clinical indicators ready':\n   - Call get_wellness_metrics again\n   - If clinical_indicators field is MISSING from response: say \"Clinical indicators are not available due to an API issue\" - NEVER make up values\n   - If clinical_indicators field is PRESENT: Announce the 2 clinical indicators in comma-separated format without numbering\n   - Example: 'Clinical indicators: Depression: X% (severity), Anxiety: Y% (severity)'\n   - Keep any added context to MAX 15 WORDS\n   - After announcing results, silently call confirm_announcement with phase='apollo'\n\n9. THERAPEUTIC CONVERSATION - After both results announced:\n   - First, let user know: \"Feel free to chat as long as you like, or say goodbye whenever you're ready to end.\"\n   - DISCUSS THEIR ACTUAL METRICS:\n     a) Reference their specific scores: \"I noticed your stress level was quite high at X%. Would you like to talk about what might be contributing to that?\"\n     b) Prioritize discussing their highest scoring areas first\n     c) Validate their experience: \"It makes sense you might be feeling this way\"\n   - APPLY CBT TECHNIQUES based on their results:\n     a) For high stress/anxiety: Cognitive reframing - identify negative thought patterns, challenge catastrophic thinking, find balanced perspectives\n     b) For high depression/low mood: Behavioral activation - small achievable activities, breaking tasks into steps, scheduling pleasant events\n     c) For high fatigue/burnout: Boundary setting, energy management, identifying values vs obligations\n     d) For all: Thought records - \"What thought came up? What evidence supports or contradicts it? What's a more balanced view?\"\n   - Frame as research-based insights, not clinical diagnosis\n   - MAX 40 WORDS per response (allow slightly longer for therapeutic depth)\n   - Use warm, empathetic, curious tone\n   - Ask open questions to explore their experiences and thought patterns\n\n10. When user indicates they want to end, thank them warmly for participating\n\nNote: We need 20 seconds total speech (10s for mood/interests + 10s for reading) before analysis.",
                "proxy_url": "${env:OPENAI_PROXY_URL|}",
                "greeting": "Hi there! I would like to talk to you for a couple of minutes and use your voice to predict your mood and energy levels including any depression, anxiety, stress, and fatigue. Nothing will be recorded and this is purely a demonstration of what is possible now that we have trained our models with many hours of professionally labelled data. Please begin by telling me your name, sex and year of birth.",
                "max_memory_length": 10,
                "use_max_completion_tokens": true,
                "reasoning_effort": "none",
                "verbosity": "low"
              }
            },
            {
              "type": "extension",
              "name": "tts",
              "addon": "cartesia_tts",
              "extension_group": "tts",
              "property": {
                "dump": false,
                "dump_path": "./",
                "params": {
                  "api_key": "${env:CARTESIA_TTS_KEY}",
                  "model_id": "sonic-3",
                  "voice": {
                    "mode": "id",
                    "id": "71a7ad14-091c-4e8e-a314-022ece01c121"
                  },
                  "generation_config": {
                    "speed": 1
                  },
                  "output_format": {
                    "container": "raw",
                    "sample_rate": 44100
                  },
                  "language": "en"
                }
              }
            },
            {
              "type": "extension",
              "name": "thymia_analyzer",
              "addon": "thymia_analyzer_python",
              "extension_group": "default",
              "property": {
                "api_key": "${env:THYMIA_API_KEY}",
                "min_speech_duration": 10.0,
                "analysis_mode": "demo_dual",
                "apollo_mood_duration": 15.0,
                "apollo_read_duration": 15.0
              }
            },
            {
              "type": "extension",
              "name": "main_control",
              "addon": "main_python",
              "extension_group": "control",
              "property": {
                "greeting": "Hi there! I would like to talk to you for a couple of minutes and use your voice to predict your mood and energy levels including any depression, anxiety, stress, and fatigue. Nothing will be recorded and this is purely a demonstration of what is possible now that we have trained our models with many hours of professionally labelled data. Please begin by telling me your name, sex and year of birth."
              }
            },
            {
              "type": "extension",
              "name": "message_collector",
              "addon": "message_collector2",
              "extension_group": "transcriber",
              "property": {}
            },
            {
              "type": "extension",
              "name": "streamid_adapter",
              "addon": "streamid_adapter",
              "property": {}
            },
            {
              "type": "extension",
              "name": "avatar",
              "addon": "anam_avatar_python",
              "extension_group": "default",
              "property": {
                "anam_api_key": "${env:ANAM_API_KEY}",
                "anam_base_url": "https://api.anam.ai/v1",
                "anam_avatar_id": "1bed9d5e-5e81-4d98-a04a-21e346bea528",
                "anam_cluster": "",
                "anam_pod": "",
                "agora_appid": "${env:AGORA_APP_ID}",
                "agora_appcert": "${env:AGORA_APP_CERTIFICATE|}",
                "channel": "",
                "agora_video_uid": 123,
                "input_audio_sample_rate": 44100,
                "quality": "${env:VIDEO_QUALITY|high}",
                "video_encoding": "${env:VIDEO_ENCODING|H264}",
                "enable_string_uid": false,
                "activity_idle_timeout": 120
              }
            }
          ],
          "connections": [
            {
              "extension": "main_control",
              "cmd": [
                {
                  "names": [
                    "on_user_joined",
                    "on_user_left"
                  ],
                  "source": [
                    {
                      "extension": "agora_rtc"
                    }
                  ]
                },
                {
                  "names": [
                    "tool_register"
                  ],
                  "source": [
                    {
                      "extension": "thymia_analyzer"
                    }
                  ]
                },
                {
                  "name": "flush",
                  "source": [
                    {
                      "extension": "stt"
                    }
                  ]
                },
                {
                  "name": "flush",
                  "dest": [
                    {
                      "extension": "avatar"
                    }
                  ]
                }
              ],
              "data": [
                {
                  "name": "asr_result",
                  "source": [
                    {
                      "extension": "stt"
                    }
                  ]
                },
                {
                  "name": "text_data",
                  "source": [
                    {
                      "extension": "thymia_analyzer"
                    }
                  ]
                }
              ]
            },
            {
              "extension": "agora_rtc",
              "audio_frame": [
                {
                  "name": "pcm_frame",
                  "source": [
                    {
                      "extension": "avatar"
                    }
                  ]
                },
                {
                  "name": "pcm_frame",
                  "dest": [
                    {
                      "extension": "streamid_adapter"
                    },
                    {
                      "extension": "thymia_analyzer"
                    }
                  ]
                }
              ],
              "data": [
                {
                  "name": "data",
                  "source": [
                    {
                      "extension": "message_collector"
                    }
                  ]
                }
              ],
              "video_frame": [
                {
                  "name": "video_frame",
                  "source": [
                    {
                      "extension": "avatar"
                    }
                  ]
                }
              ]
            },
            {
              "extension": "streamid_adapter",
              "audio_frame": [
                {
                  "name": "pcm_frame",
                  "dest": [
                    {
                      "extension": "stt"
                    }
                  ]
                }
              ]
            },
            {
              "extension": "stt",
              "cmd": [
                {
                  "name": "flush",
                  "dest": [
                    {
                      "extension": "main_control"
                    }
                  ]
                }
              ]
            },
            {
              "extension": "tts",
              "data": [
                {
                  "name": "text_data",
                  "source": [
                    {
                      "extension": "llm"
                    }
                  ]
                },
                {
                  "name": "tts_audio_start",
                  "dest": [
                    {
                      "extension": "thymia_analyzer"
                    }
                  ]
                },
                {
                  "name": "tts_audio_end",
                  "dest": [
                    {
                      "extension": "thymia_analyzer"
                    },
                    {
                      "extension": "avatar"
                    }
                  ]
                }
              ],
              "audio_frame": [
                {
                  "name": "pcm_frame",
                  "dest": [
                    {
                      "extension": "avatar"
                    }
                  ]
                }
              ]
            },
            {
              "extension": "avatar",
              "audio_frame": [
                {
                  "name": "pcm_frame",
                  "source": [
                    {
                      "extension": "tts"
                    }
                  ]
                }
              ],
              "data": [
                {
                  "name": "tts_text_input",
                  "source": [
                    {
                      "extension": "main_control"
                    }
                  ]
                }
              ]
            }
          ]
        }
      },
      {
        "name": "nova3_gpt_5_1_cartesia_anam_turkish",
        "auto_start": false,
        "graph": {
          "nodes": [
            {
              "type": "extension",
              "name": "agora_rtc",
              "addon": "agora_rtc",
              "extension_group": "default",
              "property": {
                "app_id": "${env:AGORA_APP_ID}",
                "app_certificate": "${env:AGORA_APP_CERTIFICATE|}",
                "channel": "",
                "stream_id": 0,
                "remote_stream_id": 182837,
                "subscribe_audio": true,
                "publish_audio": true,
                "publish_data": true,
                "enable_agora_asr": false
              }
            },
            {
              "type": "extension",
              "name": "stt",
              "addon": "deepgram_ws_asr_python",
              "extension_group": "stt",
              "property": {
                "params": {
                  "api_key": "${env:DEEPGRAM_API_KEY}",
                  "url": "wss://api.deepgram.com/v1/listen",
                  "model": "nova-3",
                  "language": "tr",
                  "interim_results": true,
                  "endpointing": 300,
                  "utterance_end_ms": 1000
                }
              }
            },
            {
              "type": "extension",
              "name": "llm",
              "addon": "openai_llm2_python",
              "extension_group": "chatgpt",
              "property": {
                "base_url": "https://api.openai.com/v1",
                "api_key": "${env:OPENAI_API_KEY}",
                "model": "gpt-5.1",
                "max_tokens": 1000,
                "prompt": "Sen agora.io'da yard\u0131msever bir sat\u0131c\u0131s\u0131n.",
                "proxy_url": "${env:OPENAI_PROXY_URL|}",
                "greeting": "Merhaba, benim ad\u0131m Ersel.",
                "max_memory_length": 10,
                "use_max_completion_tokens": true
              }
            },
            {
              "type": "extension",
              "name": "tts",
              "addon": "cartesia_tts",
              "extension_group": "tts",
              "property": {
                "dump": false,
                "dump_path": "./",
                "params": {
                  "api_key": "${env:CARTESIA_TTS_KEY}",
                  "model_id": "sonic-3",
                  "voice": {
                    "mode": "id",
                    "id": "c1cfee3d-532d-47f8-8dd2-8e5b2b66bf1d"
                  },
                  "generation_config": {
                    "speed": 1
                  },
                  "output_format": {
                    "container": "raw",
                    "sample_rate": 44100
                  },
                  "language": "tr"
                }
              }
            },
            {
              "type": "extension",
              "name": "main_control",
              "addon": "main_python",
              "extension_group": "control",
              "property": {
                "greeting": "Merhaba, benim ad\u0131m Ersel."
              }
            },
            {
              "type": "extension",
              "name": "message_collector",
              "addon": "message_collector2",
              "extension_group": "transcriber",
              "property": {}
            },
            {
              "type": "extension",
              "name": "streamid_adapter",
              "addon": "streamid_adapter",
              "property": {}
            },
            {
              "type": "extension",
              "name": "avatar",
              "addon": "anam_avatar_python",
              "extension_group": "default",
              "property": {
                "anam_api_key": "${env:ANAM_API_KEY}",
                "anam_base_url": "https://api.anam.ai/v1",
                "anam_avatar_id": "0631404a-eb5b-4fbf-a97d-40abd2ffddbc",
                "anam_cluster": "",
                "anam_pod": "",
                "agora_appid": "${env:AGORA_APP_ID}",
                "agora_appcert": "${env:AGORA_APP_CERTIFICATE|}",
                "channel": "",
                "agora_video_uid": 123,
                "input_audio_sample_rate": 44100,
                "quality": "${env:VIDEO_QUALITY|high}",
                "video_encoding": "${env:VIDEO_ENCODING|H264}",
                "enable_string_uid": false,
                "activity_idle_timeout": 120
              }
            }
          ],
          "connections": [
            {
              "extension": "main_control",
              "cmd": [
                {
                  "names": [
                    "on_user_joined",
                    "on_user_left"
                  ],
                  "source": [
                    {
                      "extension": "agora_rtc"
                    }
                  ]
                },
                {
                  "name": "flush",
                  "source": [
                    {
                      "extension": "stt"
                    }
                  ]
                },
                {
                  "name": "flush",
                  "dest": [
                    {
                      "extension": "avatar"
                    }
                  ]
                }
              ],
              "data": [
                {
                  "name": "asr_result",
                  "source": [
                    {
                      "extension": "stt"
                    }
                  ]
                }
              ]
            },
            {
              "extension": "agora_rtc",
              "audio_frame": [
                {
                  "name": "pcm_frame",
                  "dest": [
                    {
                      "extension": "streamid_adapter"
                    }
                  ]
                }
              ],
              "data": [
                {
                  "name": "data",
                  "source": [
                    {
                      "extension": "message_collector"
                    }
                  ]
                }
              ]
            },
            {
              "extension": "streamid_adapter",
              "audio_frame": [
                {
                  "name": "pcm_frame",
                  "dest": [
                    {
                      "extension": "stt"
                    }
                  ]
                }
              ]
            },
            {
              "extension": "stt",
              "cmd": [
                {
                  "name": "flush",
                  "dest": [
                    {
                      "extension": "main_control"
                    }
                  ]
                }
              ]
            },
            {
              "extension": "llm",
              "cmd": [
                {
                  "names": [
                    "flush"
                  ],
                  "source": [
                    {
                      "extension": "main_control"
                    }
                  ]
                }
              ],
              "data": [
                {
                  "name": "text_data",
                  "source": [
                    {
                      "extension": "main_control"
                    }
                  ]
                }
              ]
            },
            {
              "extension": "tts",
              "data": [
                {
                  "name": "text_data",
                  "source": [
                    {
                      "extension": "llm"
                    }
                  ]
                },
                {
                  "name": "tts_audio_end",
                  "dest": [
                    {
                      "extension": "avatar"
                    }
                  ]
                }
              ],
              "audio_frame": [
                {
                  "name": "pcm_frame",
                  "dest": [
                    {
                      "extension": "avatar"
                    }
                  ]
                }
              ]
            }
          ]
        }
      },
      {
        "name": "eliza",
        "auto_start": false,
        "graph": {
          "nodes": [
            {
              "type": "extension",
              "name": "agora_rtc",
              "addon": "agora_rtc",
              "extension_group": "default",
              "property": {
                "app_id": "${env:AGORA_APP_ID}",
                "app_certificate": "${env:AGORA_APP_CERTIFICATE|}",
                "channel": "",
                "stream_id": 0,
                "remote_stream_id": 182837,
                "subscribe_audio": true,
                "publish_audio": true,
                "publish_data": true,
                "enable_agora_asr": false
              }
            },
            {
              "type": "extension",
              "name": "stt",
              "addon": "deepgram_ws_asr_python",
              "extension_group": "stt",
              "property": {
                "params": {
                  "api_key": "${env:DEEPGRAM_API_KEY}",
                  "url": "wss://api.deepgram.com/v2/listen",
                  "model": "flux-general-en",
                  "language": "en-US",
                  "interim_results": true,
                  "eot_threshold": 0.73,
                  "eot_timeout_ms": 2500,
                  "eager_eot_threshold": 0.0
                }
              }
            },
            {
              "type": "extension",
              "name": "llm",
              "addon": "openai_llm2_python",
              "extension_group": "chatgpt",
              "property": {
                "base_url": "https://api.openai.com/v1",
                "api_key": "${env:OPENAI_API_KEY}",
                "model": "gpt-5.1",
                "max_tokens": 1000,
                "prompt": "You are Eliza, a friendly and helpful voice assistant.",
                "proxy_url": "${env:OPENAI_PROXY_URL|}",
                "greeting": "Hello! I'm Eliza. How can I help you today?",
                "max_memory_length": 10,
                "use_max_completion_tokens": true
              }
            },
            {
              "type": "extension",
              "name": "tts",
              "addon": "cartesia_tts",
              "extension_group": "tts",
              "property": {
                "dump": false,
                "dump_path": "./",
                "params": {
                  "api_key": "${env:CARTESIA_TTS_KEY}",
                  "model_id": "sonic-3",
                  "voice": {
                    "mode": "id",
                    "id": "71a7ad14-091c-4e8e-a314-022ece01c121"
                  },
                  "generation_config": {
                    "speed": 1
                  },
                  "output_format": {
                    "container": "raw",
                    "sample_rate": 44100
                  },
                  "language": "en"
                }
              }
            },
            {
              "type": "extension",
              "name": "main_control",
              "addon": "main_python",
              "extension_group": "control",
              "property": {
                "greeting": "Hello! I'm Eliza. How can I help you today?"
              }
            },
            {
              "type": "extension",
              "name": "message_collector",
              "addon": "message_collector2",
              "extension_group": "transcriber",
              "property": {}
            },
            {
              "type": "extension",
              "name": "streamid_adapter",
              "addon": "streamid_adapter",
              "property": {}
            },
            {
              "type": "extension",
              "name": "avatar",
              "addon": "anam_avatar_python",
              "extension_group": "default",
              "property": {
                "anam_api_key": "${env:ANAM_API_KEY}",
                "anam_base_url": "https://api.anam.ai/v1",
                "anam_avatar_id": "dab3f691-6231-455f-9128-9a47e7a967c1",
                "anam_cluster": "",
                "anam_pod": "",
                "agora_appid": "${env:AGORA_APP_ID}",
                "agora_appcert": "${env:AGORA_APP_CERTIFICATE|}",
                "channel": "",
                "agora_video_uid": 123,
                "input_audio_sample_rate": 44100,
                "quality": "${env:VIDEO_QUALITY|high}",
                "video_encoding": "${env:VIDEO_ENCODING|H264}",
                "enable_string_uid": false,
                "activity_idle_timeout": 120
              }
            }
          ],
          "connections": [
            {
              "extension": "main_control",
              "cmd": [
                {
                  "names": [
                    "on_user_joined",
                    "on_user_left"
                  ],
                  "source": [
                    {
                      "extension": "agora_rtc"
                    }
                  ]
                },
                {
                  "name": "flush",
                  "source": [
                    {
                      "extension": "stt"
                    }
                  ]
                },
                {
                  "name": "flush",
                  "dest": [
                    {
                      "extension": "avatar"
                    }
                  ]
                }
              ],
              "data": [
                {
                  "name": "asr_result",
                  "source": [
                    {
                      "extension": "stt"
                    }
                  ]
                }
              ]
            },
            {
              "extension": "agora_rtc",
              "audio_frame": [
                {
                  "name": "pcm_frame",
                  "dest": [
                    {
                      "extension": "streamid_adapter"
                    }
                  ]
                }
              ],
              "data": [
                {
                  "name": "data",
                  "source": [
                    {
                      "extension": "message_collector"
                    }
                  ]
                }
              ]
            },
            {
              "extension": "streamid_adapter",
              "audio_frame": [
                {
                  "name": "pcm_frame",
                  "dest": [
                    {
                      "extension": "stt"
                    }
                  ]
                }
              ]
            },
            {
              "extension": "stt",
              "cmd": [
                {
                  "name": "flush",
                  "dest": [
                    {
                      "extension": "main_control"
                    }
                  ]
                }
              ]
            },
            {
              "extension": "llm",
              "cmd": [
                {
                  "names": [
                    "flush"
                  ],
                  "source": [
                    {
                      "extension": "main_control"
                    }
                  ]
                }
              ],
              "data": [
                {
                  "name": "text_data",
                  "source": [
                    {
                      "extension": "main_control"
                    }
                  ]
                }
              ]
            },
            {
              "extension": "tts",
              "data": [
                {
                  "name": "text_data",
                  "source": [
                    {
                      "extension": "llm"
                    }
                  ]
                },
                {
                  "name": "tts_audio_end",
                  "dest": [
                    {
                      "extension": "avatar"
                    }
                  ]
                }
              ],
              "audio_frame": [
                {
                  "name": "pcm_frame",
                  "dest": [
                    {
                      "extension": "avatar"
                    }
                  ]
                }
              ]
            }
          ]
        }
      },
      {
        "name": "flux_hellos_gpt_5_1_cartesia_anam",
        "auto_start": false,
        "graph": {
          "nodes": [
            {
              "type": "extension",
              "name": "agora_rtc",
              "addon": "agora_rtc",
              "extension_group": "default",
              "property": {
                "app_id": "${env:AGORA_APP_ID}",
                "app_certificate": "${env:AGORA_APP_CERTIFICATE|}",
                "channel": "",
                "stream_id": 0,
                "remote_stream_id": 182837,
                "subscribe_audio": true,
                "publish_audio": true,
                "publish_data": true,
                "enable_agora_asr": false
              }
            },
            {
              "type": "extension",
              "name": "stt",
              "addon": "deepgram_ws_asr_python",
              "extension_group": "stt",
              "property": {
                "params": {
                  "api_key": "${env:DEEPGRAM_API_KEY}",
                  "url": "wss://api.deepgram.com/v2/listen",
                  "model": "flux-general-en",
                  "language": "en-US",
                  "interim_results": true,
                  "eot_threshold": 0.73,
                  "eot_timeout_ms": 2500,
                  "eager_eot_threshold": 0.0
                }
              }
            },
            {
              "type": "extension",
              "name": "llm",
              "addon": "openai_llm2_python",
              "extension_group": "chatgpt",
              "property": {
                "base_url": "https://api.openai.com/v1",
                "api_key": "${env:OPENAI_API_KEY}",
                "model": "gpt-5.1",
                "max_tokens": 1000,
                "prompt": "You are a wellness triage assistant. Guide the conversation:\n\nWORD LIMITS: MAX 20 WORDS per response\n\n1. Greet user warmly. Ask for their name, whether they are male or female, and year of birth.\n\n2. Once you have all three, say EXACTLY: \"Tell me about your hobbies or interests. Or feel free to read something aloud if you prefer.\" Do not paraphrase. Aim for 10+ seconds of speech.\n\n3. Call check_phase_progress with name, year_of_birth, sex to verify enough speech collected.\n   - If phase_complete=false: Ask another question to gather more speech\n   - If phase_complete=true: Say EXACTLY: \"Analyzing your responses now, this takes around 10 seconds. If I connect you with a therapist would you prefer a digital human or a cartoon therapist?\"\n\n4. While waiting for metrics, mention that a cartoon therapist is a good choice as some people feel more relaxed opening up to a non-human character.\n\n5. When you receive '[SYSTEM ALERT] Wellness metrics ready':\n   - Call get_wellness_metrics\n   - Announce the 5 metrics as percentages 0 to 100: stress, distress, burnout, fatigue, low self-esteem\n   - Use plain numbered lists only, no markdown formatting\n   - Call confirm_announcement with phase='hellos'\n\n6. After announcing results, ask if they would like to be transferred to a therapist now.\n   - If yes, say: \"Transferring you now.\" and then send exactly: {TRANSFER}\n   - If no, say goodbye warmly.\n\nNote: We only need 10 seconds of speech for this quick wellness check.",
                "proxy_url": "${env:OPENAI_PROXY_URL|}",
                "greeting": "Hi there! I'm here to do a quick wellness check using your voice. It only takes about 15 seconds. Please tell me your name, whether you are male or female, and your year of birth.",
                "max_memory_length": 10,
                "use_max_completion_tokens": true
              }
            },
            {
              "type": "extension",
              "name": "tts",
              "addon": "cartesia_tts",
              "extension_group": "tts",
              "property": {
                "dump": false,
                "dump_path": "./",
                "params": {
                  "api_key": "${env:CARTESIA_TTS_KEY}",
                  "model_id": "sonic-3",
                  "voice": {
                    "mode": "id",
                    "id": "71a7ad14-091c-4e8e-a314-022ece01c121"
                  },
                  "generation_config": {
                    "speed": 1
                  },
                  "output_format": {
                    "container": "raw",
                    "sample_rate": 44100
                  },
                  "language": "en"
                }
              }
            },
            {
              "type": "extension",
              "name": "thymia_analyzer",
              "addon": "thymia_analyzer_python",
              "extension_group": "default",
              "property": {
                "api_key": "${env:THYMIA_API_KEY}",
                "analysis_mode": "hellos_only",
                "min_speech_duration": 10.0,
                "apollo_mood_duration": 10.0
              }
            },
            {
              "type": "extension",
              "name": "main_control",
              "addon": "main_python",
              "extension_group": "control",
              "property": {
                "greeting": "Hi there! I'm here to do a quick wellness check using your voice. It only takes about 15 seconds. Please tell me your name, whether you are male or female, and your year of birth."
              }
            },
            {
              "type": "extension",
              "name": "message_collector",
              "addon": "message_collector2",
              "extension_group": "transcriber",
              "property": {}
            },
            {
              "type": "extension",
              "name": "streamid_adapter",
              "addon": "streamid_adapter",
              "property": {}
            },
            {
              "type": "extension",
              "name": "avatar",
              "addon": "anam_avatar_python",
              "extension_group": "default",
              "property": {
                "anam_api_key": "${env:ANAM_API_KEY}",
                "anam_base_url": "https://api.anam.ai/v1",
                "anam_avatar_id": "1bed9d5e-5e81-4d98-a04a-21e346bea528",
                "anam_cluster": "",
                "anam_pod": "",
                "agora_appid": "${env:AGORA_APP_ID}",
                "agora_appcert": "${env:AGORA_APP_CERTIFICATE|}",
                "channel": "",
                "agora_video_uid": 123,
                "input_audio_sample_rate": 44100,
                "quality": "${env:VIDEO_QUALITY|high}",
                "video_encoding": "${env:VIDEO_ENCODING|H264}",
                "enable_string_uid": false,
                "activity_idle_timeout": 120
              }
            }
          ],
          "connections": [
            {
              "extension": "main_control",
              "cmd": [
                {
                  "names": [
                    "on_user_joined",
                    "on_user_left"
                  ],
                  "source": [
                    {
                      "extension": "agora_rtc"
                    }
                  ]
                },
                {
                  "names": [
                    "tool_register"
                  ],
                  "source": [
                    {
                      "extension": "thymia_analyzer"
                    }
                  ]
                },
                {
                  "name": "flush",
                  "source": [
                    {
                      "extension": "stt"
                    }
                  ]
                },
                {
                  "name": "flush",
                  "dest": [
                    {
                      "extension": "avatar"
                    }
                  ]
                }
              ],
              "data": [
                {
                  "name": "asr_result",
                  "source": [
                    {
                      "extension": "stt"
                    }
                  ]
                },
                {
                  "name": "text_data",
                  "source": [
                    {
                      "extension": "thymia_analyzer"
                    }
                  ]
                }
              ]
            },
            {
              "extension": "agora_rtc",
              "audio_frame": [
                {
                  "name": "pcm_frame",
                  "source": [
                    {
                      "extension": "avatar"
                    }
                  ]
                },
                {
                  "name": "pcm_frame",
                  "dest": [
                    {
                      "extension": "streamid_adapter"
                    },
                    {
                      "extension": "thymia_analyzer"
                    }
                  ]
                }
              ],
              "data": [
                {
                  "name": "data",
                  "source": [
                    {
                      "extension": "message_collector"
                    }
                  ]
                }
              ],
              "video_frame": [
                {
                  "name": "video_frame",
                  "source": [
                    {
                      "extension": "avatar"
                    }
                  ]
                }
              ]
            },
            {
              "extension": "streamid_adapter",
              "audio_frame": [
                {
                  "name": "pcm_frame",
                  "dest": [
                    {
                      "extension": "stt"
                    }
                  ]
                }
              ]
            },
            {
              "extension": "stt",
              "cmd": [
                {
                  "name": "flush",
                  "dest": [
                    {
                      "extension": "main_control"
                    }
                  ]
                }
              ]
            },
            {
              "extension": "tts",
              "data": [
                {
                  "name": "text_data",
                  "source": [
                    {
                      "extension": "llm"
                    }
                  ]
                },
                {
                  "name": "tts_audio_start",
                  "dest": [
                    {
                      "extension": "thymia_analyzer"
                    }
                  ]
                },
                {
                  "name": "tts_audio_end",
                  "dest": [
                    {
                      "extension": "thymia_analyzer"
                    },
                    {
                      "extension": "avatar"
                    }
                  ]
                }
              ],
              "audio_frame": [
                {
                  "name": "pcm_frame",
                  "dest": [
                    {
                      "extension": "avatar"
                    }
                  ]
                }
              ]
            },
            {
              "extension": "avatar",
              "audio_frame": [
                {
                  "name": "pcm_frame",
                  "source": [
                    {
                      "extension": "tts"
                    }
                  ]
                }
              ],
              "data": [
                {
                  "name": "tts_text_input",
                  "source": [
                    {
                      "extension": "main_control"
                    }
                  ]
                }
              ]
            }
          ]
        }
      },
      {
        "name": "flux_richard_gpt_5_1_elevenlabs_anam",
        "auto_start": false,
        "graph": {
          "nodes": [
            {
              "type": "extension",
              "name": "agora_rtc",
              "addon": "agora_rtc",
              "extension_group": "default",
              "property": {
                "app_id": "${env:AGORA_APP_ID}",
                "app_certificate": "${env:AGORA_APP_CERTIFICATE|}",
                "channel": "",
                "stream_id": 0,
                "remote_stream_id": 182837,
                "subscribe_audio": true,
                "publish_audio": true,
                "publish_data": true,
                "enable_agora_asr": false
              }
            },
            {
              "type": "extension",
              "name": "stt",
              "addon": "deepgram_ws_asr_python",
              "extension_group": "stt",
              "property": {
                "params": {
                  "api_key": "${env:DEEPGRAM_API_KEY}",
                  "url": "wss://api.deepgram.com/v2/listen",
                  "model": "flux-general-en",
                  "language": "en-US",
                  "interim_results": true,
                  "eot_threshold": 0.73,
                  "eot_timeout_ms": 2500,
                  "eager_eot_threshold": 0.0
                }
              }
            },
            {
              "type": "extension",
              "name": "llm",
              "addon": "openai_llm2_python",
              "extension_group": "llm",
              "property": {
                "base_url": "https://api.openai.com/v1",
                "api_key": "${env:OPENAI_API_KEY}",
                "model": "gpt-5.1",
                "prompt": "You are Celeste, a warm and mystical psychic advisor who reads the stars. Speak in an enchanting, poetic manner using celestial imagery, always remaining encouraging and uplifting.\n\nAfter receiving the user's date of birth, identify their zodiac sign and deliver a personalized horoscope covering:\n- Their sign's core traits\n- Current cosmic influences\n- Guidance for love, career, and personal growth\n- A lucky number, color, or affirmation\n\nFrame all challenges as opportunities for growth. Never make alarming predictions. If someone shares difficulties, offer compassionate hope.",
                "enable_tools": false,
                "temperature": 0.7,
                "max_tokens": 1000,
                "use_max_completion_tokens": true
              }
            },
            {
              "type": "extension",
              "name": "tts",
              "addon": "elevenlabs_tts2_python",
              "extension_group": "tts",
              "property": {
                "dump": false,
                "dump_path": "./",
                "params": {
                  "key": "sk_f7060f6ff25e5a2f6bec91c1655ff7c92d7b740694fa7d64",
                  "model_id": "eleven_multilingual_v2",
                  "voice_id": "8DSrxjsUJ5rkR4qWb9ku",
                  "output_format": "pcm_16000"
                }
              }
            },
            {
              "type": "extension",
              "name": "main_control",
              "addon": "main_python",
              "extension_group": "control",
              "property": {
                "greeting": "Welcome, dear seeker\u2026 I sense the universe has guided you here for a reason. To unlock the wisdom the stars hold for you, I'll need to know when you entered this world. What is your date of birth?"
              }
            },
            {
              "type": "extension",
              "name": "message_collector",
              "addon": "message_collector2",
              "extension_group": "transcriber",
              "property": {}
            },
            {
              "type": "extension",
              "name": "streamid_adapter",
              "addon": "streamid_adapter",
              "property": {}
            },
            {
              "type": "extension",
              "name": "avatar",
              "addon": "anam_avatar_python",
              "extension_group": "default",
              "property": {
                "anam_api_key": "${env:ANAM_API_KEY}",
                "anam_base_url": "https://api.anam.ai/v1",
                "anam_avatar_id": "2a8ca1fb-35aa-4c63-8be9-b45a6454617c",
                "anam_cluster": "",
                "anam_pod": "",
                "agora_appid": "${env:AGORA_APP_ID}",
                "agora_appcert": "${env:AGORA_APP_CERTIFICATE|}",
                "channel": "",
                "agora_video_uid": 123,
                "input_audio_sample_rate": 44100,
                "quality": "${env:VIDEO_QUALITY|high}",
                "video_encoding": "${env:VIDEO_ENCODING|H264}",
                "enable_string_uid": false,
                "activity_idle_timeout": 120,
                "disable_greeting_wait": true,
                "video_frame_width": 856,
                "video_frame_height": 1504,
                "video_frame_rate": 30
              }
            }
          ],
          "connections": [
            {
              "extension": "main_control",
              "cmd": [
                {
                  "names": [
                    "on_user_joined",
                    "on_user_left"
                  ],
                  "source": [
                    {
                      "extension": "agora_rtc"
                    }
                  ]
                },
                {
                  "name": "flush",
                  "source": [
                    {
                      "extension": "stt"
                    }
                  ]
                },
                {
                  "name": "flush",
                  "dest": [
                    {
                      "extension": "avatar"
                    }
                  ]
                }
              ],
              "data": [
                {
                  "name": "asr_result",
                  "source": [
                    {
                      "extension": "stt"
                    }
                  ]
                }
              ]
            },
            {
              "extension": "agora_rtc",
              "audio_frame": [
                {
                  "name": "pcm_frame",
                  "dest": [
                    {
                      "extension": "streamid_adapter"
                    }
                  ]
                }
              ],
              "data": [
                {
                  "name": "data",
                  "source": [
                    {
                      "extension": "message_collector"
                    }
                  ]
                }
              ]
            },
            {
              "extension": "streamid_adapter",
              "audio_frame": [
                {
                  "name": "pcm_frame",
                  "dest": [
                    {
                      "extension": "stt"
                    }
                  ]
                }
              ]
            },
            {
              "extension": "stt",
              "cmd": [
                {
                  "name": "flush",
                  "dest": [
                    {
                      "extension": "main_control"
                    }
                  ]
                }
              ]
            },
            {
              "extension": "llm",
              "cmd": [
                {
                  "names": [
                    "flush"
                  ],
                  "source": [
                    {
                      "extension": "main_control"
                    }
                  ]
                }
              ],
              "data": [
                {
                  "name": "text_data",
                  "source": [
                    {
                      "extension": "main_control"
                    }
                  ]
                }
              ]
            },
            {
              "extension": "tts",
              "data": [
                {
                  "name": "text_data",
                  "source": [
                    {
                      "extension": "llm"
                    }
                  ]
                },
                {
                  "name": "tts_audio_end",
                  "dest": [
                    {
                      "extension": "avatar"
                    }
                  ]
                }
              ],
              "audio_frame": [
                {
                  "name": "pcm_frame",
                  "dest": [
                    {
                      "extension": "avatar"
                    }
                  ]
                }
              ]
            }
          ]
        }
      },
      {
        "name": "flux_octopus_gpt_5_1_elevenlabs",
        "auto_start": false,
        "graph": {
          "nodes": [
            {
              "type": "extension",
              "name": "agora_rtc",
              "addon": "agora_rtc",
              "extension_group": "default",
              "property": {
                "app_id": "${env:AGORA_APP_ID}",
                "app_certificate": "${env:AGORA_APP_CERTIFICATE|}",
                "channel": "",
                "stream_id": 0,
                "remote_stream_id": 182837,
                "subscribe_audio": true,
                "publish_audio": true,
                "publish_data": true,
                "enable_agora_asr": false
              }
            },
            {
              "type": "extension",
              "name": "stt",
              "addon": "deepgram_ws_asr_python",
              "extension_group": "stt",
              "property": {
                "params": {
                  "api_key": "${env:DEEPGRAM_API_KEY}",
                  "url": "wss://api.deepgram.com/v2/listen",
                  "model": "flux-general-en",
                  "language": "en-US",
                  "interim_results": true,
                  "eot_threshold": 0.73,
                  "eot_timeout_ms": 2500,
                  "eager_eot_threshold": 0.0
                }
              }
            },
            {
              "type": "extension",
              "name": "llm",
              "addon": "openai_llm2_python",
              "extension_group": "llm",
              "property": {
                "base_url": "https://api.openai.com/v1",
                "api_key": "${env:OPENAI_API_KEY}",
                "model": "gpt-5.1",
                "prompt": "You are a sleep and rest therapist. Give serious practical advice on improving sleep quality and getting better rest. Keep responses under 20 words. No punctuation or emoji.",
                "enable_tools": false,
                "temperature": 0.7,
                "max_tokens": 1000,
                "use_max_completion_tokens": true
              }
            },
            {
              "type": "extension",
              "name": "tts",
              "addon": "elevenlabs_tts2_python",
              "extension_group": "tts",
              "property": {
                "dump": false,
                "dump_path": "./",
                "params": {
                  "key": "sk_f7060f6ff25e5a2f6bec91c1655ff7c92d7b740694fa7d64",
                  "model_id": "eleven_multilingual_v2",
                  "voice_id": "8DSrxjsUJ5rkR4qWb9ku",
                  "output_format": "pcm_16000"
                }
              }
            },
            {
              "type": "extension",
              "name": "main_control",
              "addon": "main_python",
              "extension_group": "control",
              "property": {
                "greeting": "Hi Ben, I see your fatigue is quite high. How have you been feeling lately."
              }
            },
            {
              "type": "extension",
              "name": "message_collector",
              "addon": "message_collector2",
              "extension_group": "transcriber",
              "property": {}
            },
            {
              "type": "extension",
              "name": "streamid_adapter",
              "addon": "streamid_adapter",
              "property": {}
            }
          ],
          "connections": [
            {
              "extension": "main_control",
              "cmd": [
                {
                  "names": [
                    "on_user_joined",
                    "on_user_left"
                  ],
                  "source": [
                    {
                      "extension": "agora_rtc"
                    }
                  ]
                },
                {
                  "name": "flush",
                  "source": [
                    {
                      "extension": "stt"
                    }
                  ]
                }
              ],
              "data": [
                {
                  "name": "asr_result",
                  "source": [
                    {
                      "extension": "stt"
                    }
                  ]
                }
              ]
            },
            {
              "extension": "agora_rtc",
              "audio_frame": [
                {
                  "name": "pcm_frame",
                  "dest": [
                    {
                      "extension": "streamid_adapter"
                    }
                  ]
                },
                {
                  "name": "pcm_frame",
                  "source": [
                    {
                      "extension": "tts"
                    }
                  ]
                }
              ],
              "data": [
                {
                  "name": "data",
                  "source": [
                    {
                      "extension": "message_collector"
                    }
                  ]
                }
              ]
            },
            {
              "extension": "streamid_adapter",
              "audio_frame": [
                {
                  "name": "pcm_frame",
                  "dest": [
                    {
                      "extension": "stt"
                    }
                  ]
                }
              ]
            },
            {
              "extension": "stt",
              "cmd": [
                {
                  "name": "flush",
                  "dest": [
                    {
                      "extension": "main_control"
                    }
                  ]
                }
              ]
            },
            {
              "extension": "llm",
              "cmd": [
                {
                  "names": [
                    "flush"
                  ],
                  "source": [
                    {
                      "extension": "main_control"
                    }
                  ]
                }
              ],
              "data": [
                {
                  "name": "text_data",
                  "source": [
                    {
                      "extension": "main_control"
                    }
                  ]
                }
              ]
            },
            {
              "extension": "tts",
              "data": [
                {
                  "name": "text_data",
                  "source": [
                    {
                      "extension": "llm"
                    }
                  ]
                }
              ],
              "audio_frame": [
                {
                  "name": "pcm_frame",
                  "dest": [
                    {
                      "extension": "agora_rtc"
                    }
                  ]
                }
              ]
            }
          ]
        }
      },
      {
        "name": "flux_gpt_5_1_cartesia_anam",
        "auto_start": false,
        "graph": {
          "nodes": [
            {
              "type": "extension",
              "name": "agora_rtc",
              "addon": "agora_rtc",
              "extension_group": "default",
              "property": {
                "app_id": "${env:AGORA_APP_ID}",
                "app_certificate": "${env:AGORA_APP_CERTIFICATE|}",
                "channel": "",
                "stream_id": 0,
                "remote_stream_id": 182837,
                "subscribe_audio": true,
                "publish_audio": true,
                "publish_data": true,
                "enable_agora_asr": false
              }
            },
            {
              "type": "extension",
              "name": "stt",
              "addon": "deepgram_ws_asr_python",
              "extension_group": "stt",
              "property": {
                "params": {
                  "api_key": "${env:DEEPGRAM_API_KEY}",
                  "url": "wss://api.deepgram.com/v2/listen",
                  "model": "flux-general-en",
                  "language": "en-US",
                  "interim_results": true,
                  "eot_threshold": 0.73,
                  "eot_timeout_ms": 2500,
                  "eager_eot_threshold": 0.0
                }
              }
            },
            {
              "type": "extension",
              "name": "llm",
              "addon": "openai_llm2_python",
              "extension_group": "chatgpt",
              "property": {
                "base_url": "https://api.openai.com/v1",
                "api_key": "${env:OPENAI_API_KEY}",
                "model": "gpt-5.1",
                "max_tokens": 1000,
                "prompt": "You are Bella, a quiz master who asks capital city questions. Keep responses under 30 words and immediately ask the next question after announcing the result.",
                "proxy_url": "${env:OPENAI_PROXY_URL|}",
                "greeting": "Hey there, I am Quiz Master Bella, would you like me to quiz you on capital cities?",
                "max_memory_length": 10,
                "use_max_completion_tokens": true
              }
            },
            {
              "type": "extension",
              "name": "tts",
              "addon": "cartesia_tts",
              "extension_group": "tts",
              "property": {
                "dump": false,
                "dump_path": "./",
                "params": {
                  "api_key": "${env:CARTESIA_TTS_KEY}",
                  "model_id": "sonic-3",
                  "voice": {
                    "mode": "id",
                    "id": "71a7ad14-091c-4e8e-a314-022ece01c121"
                  },
                  "generation_config": {
                    "speed": 1
                  },
                  "output_format": {
                    "container": "raw",
                    "sample_rate": 44100
                  },
                  "language": "en"
                }
              }
            },
            {
              "type": "extension",
              "name": "main_control",
              "addon": "main_python",
              "extension_group": "control",
              "property": {
                "greeting": "Hey there, I am Quiz Master Bella, would you like me to quiz you on capital cities?"
              }
            },
            {
              "type": "extension",
              "name": "message_collector",
              "addon": "message_collector2",
              "extension_group": "transcriber",
              "property": {}
            },
            {
              "type": "extension",
              "name": "streamid_adapter",
              "addon": "streamid_adapter",
              "property": {}
            },
            {
              "type": "extension",
              "name": "avatar",
              "addon": "anam_avatar_python",
              "extension_group": "default",
              "property": {
                "anam_api_key": "${env:ANAM_API_KEY}",
                "anam_base_url": "https://api.anam.ai/v1",
                "anam_avatar_id": "1bed9d5e-5e81-4d98-a04a-21e346bea528",
                "anam_cluster": "",
                "anam_pod": "",
                "agora_appid": "${env:AGORA_APP_ID}",
                "agora_appcert": "${env:AGORA_APP_CERTIFICATE|}",
                "channel": "",
                "agora_video_uid": 123,
                "input_audio_sample_rate": 44100,
                "quality": "${env:VIDEO_QUALITY|high}",
                "video_encoding": "${env:VIDEO_ENCODING|H264}",
                "enable_string_uid": false,
                "activity_idle_timeout": 120
              }
            }
          ],
          "connections": [
            {
              "extension": "main_control",
              "cmd": [
                {
                  "names": [
                    "on_user_joined",
                    "on_user_left"
                  ],
                  "source": [
                    {
                      "extension": "agora_rtc"
                    }
                  ]
                },
                {
                  "name": "flush",
                  "source": [
                    {
                      "extension": "stt"
                    }
                  ]
                },
                {
                  "name": "flush",
                  "dest": [
                    {
                      "extension": "avatar"
                    }
                  ]
                }
              ],
              "data": [
                {
                  "name": "asr_result",
                  "source": [
                    {
                      "extension": "stt"
                    }
                  ]
                }
              ]
            },
            {
              "extension": "agora_rtc",
              "audio_frame": [
                {
                  "name": "pcm_frame",
                  "dest": [
                    {
                      "extension": "streamid_adapter"
                    }
                  ]
                }
              ],
              "data": [
                {
                  "name": "data",
                  "source": [
                    {
                      "extension": "message_collector"
                    }
                  ]
                }
              ]
            },
            {
              "extension": "streamid_adapter",
              "audio_frame": [
                {
                  "name": "pcm_frame",
                  "dest": [
                    {
                      "extension": "stt"
                    }
                  ]
                }
              ]
            },
            {
              "extension": "stt",
              "cmd": [
                {
                  "name": "flush",
                  "dest": [
                    {
                      "extension": "main_control"
                    }
                  ]
                }
              ]
            },
            {
              "extension": "llm",
              "cmd": [
                {
                  "names": [
                    "flush"
                  ],
                  "source": [
                    {
                      "extension": "main_control"
                    }
                  ]
                }
              ],
              "data": [
                {
                  "name": "text_data",
                  "source": [
                    {
                      "extension": "main_control"
                    }
                  ]
                }
              ]
            },
            {
              "extension": "tts",
              "data": [
                {
                  "name": "text_data",
                  "source": [
                    {
                      "extension": "llm"
                    }
                  ]
                },
                {
                  "name": "tts_audio_end",
                  "dest": [
                    {
                      "extension": "avatar"
                    }
                  ]
                }
              ],
              "audio_frame": [
                {
                  "name": "pcm_frame",
                  "dest": [
                    {
                      "extension": "avatar"
                    }
                  ]
                }
              ]
            }
          ]
        }
      },
      {
        "name": "haley",
        "auto_start": false,
        "graph": {
          "nodes": [
            {
              "type": "extension",
              "name": "agora_rtc",
              "addon": "agora_rtc",
              "extension_group": "default",
              "property": {
                "app_id": "${env:AGORA_APP_ID}",
                "app_certificate": "${env:AGORA_APP_CERTIFICATE|}",
                "channel": "",
                "stream_id": 0,
                "remote_stream_id": 182837,
                "subscribe_audio": true,
                "publish_audio": true,
                "publish_data": true,
                "enable_agora_asr": false
              }
            },
            {
              "type": "extension",
              "name": "stt",
              "addon": "deepgram_ws_asr_python",
              "extension_group": "stt",
              "property": {
                "params": {
                  "api_key": "${env:DEEPGRAM_API_KEY}",
                  "url": "wss://api.deepgram.com/v2/listen",
                  "model": "flux-general-en",
                  "language": "en-US",
                  "interim_results": true,
                  "eot_threshold": 0.73,
                  "eot_timeout_ms": 2500,
                  "eager_eot_threshold": 0.0
                }
              }
            },
            {
              "type": "extension",
              "name": "llm",
              "addon": "openai_llm2_python",
              "extension_group": "chatgpt",
              "property": {
                "base_url": "https://api.openai.com/v1",
                "api_key": "${env:OPENAI_API_KEY}",
                "model": "gpt-5.1",
                "max_tokens": 1000,
                "prompt": "You are Haley, an energetic and fun bingo host. Call out bingo numbers with enthusiasm, celebrate winners, and keep the energy high. Use phrases like 'Eyes down!', 'Two fat ladies - 88!', 'Legs eleven!'. Keep responses short and punchy under 30 words.",
                "proxy_url": "${env:OPENAI_PROXY_URL|}",
                "greeting": "Welcome to Bingo Night! I'm your host Haley. Are you ready to play? Eyes down, let's go!",
                "max_memory_length": 10,
                "use_max_completion_tokens": true
              }
            },
            {
              "type": "extension",
              "name": "tts",
              "addon": "cartesia_tts",
              "extension_group": "tts",
              "property": {
                "dump": false,
                "dump_path": "./",
                "params": {
                  "api_key": "${env:CARTESIA_TTS_KEY}",
                  "model_id": "sonic-3",
                  "voice": {
                    "mode": "id",
                    "id": "71a7ad14-091c-4e8e-a314-022ece01c121"
                  },
                  "generation_config": {
                    "speed": 1
                  },
                  "output_format": {
                    "container": "raw",
                    "sample_rate": 44100
                  },
                  "language": "en"
                }
              }
            },
            {
              "type": "extension",
              "name": "main_control",
              "addon": "main_python",
              "extension_group": "control",
              "property": {
                "greeting": "Welcome to Bingo Night! I'm your host Haley. Are you ready to play? Eyes down, let's go!"
              }
            },
            {
              "type": "extension",
              "name": "message_collector",
              "addon": "message_collector2",
              "extension_group": "transcriber",
              "property": {}
            },
            {
              "type": "extension",
              "name": "streamid_adapter",
              "addon": "streamid_adapter",
              "property": {}
            },
            {
              "type": "extension",
              "name": "avatar",
              "addon": "anam_avatar_python",
              "extension_group": "default",
              "property": {
                "anam_api_key": "${env:ANAM_API_KEY}",
                "anam_base_url": "https://api.anam.ai/v1",
                "anam_avatar_id": "a951b7a8-79c8-4fb7-9ff7-c4f79aa6c097",
                "anam_cluster": "",
                "anam_pod": "",
                "agora_appid": "${env:AGORA_APP_ID}",
                "agora_appcert": "${env:AGORA_APP_CERTIFICATE|}",
                "channel": "",
                "agora_video_uid": 123,
                "input_audio_sample_rate": 44100,
                "quality": "${env:VIDEO_QUALITY|high}",
                "video_encoding": "${env:VIDEO_ENCODING|H264}",
                "enable_string_uid": false,
                "activity_idle_timeout": 120
              }
            }
          ],
          "connections": [
            {
              "extension": "main_control",
              "cmd": [
                {
                  "names": [
                    "on_user_joined",
                    "on_user_left"
                  ],
                  "source": [
                    {
                      "extension": "agora_rtc"
                    }
                  ]
                },
                {
                  "name": "flush",
                  "source": [
                    {
                      "extension": "stt"
                    }
                  ]
                },
                {
                  "name": "flush",
                  "dest": [
                    {
                      "extension": "avatar"
                    }
                  ]
                }
              ],
              "data": [
                {
                  "name": "asr_result",
                  "source": [
                    {
                      "extension": "stt"
                    }
                  ]
                }
              ]
            },
            {
              "extension": "agora_rtc",
              "audio_frame": [
                {
                  "name": "pcm_frame",
                  "dest": [
                    {
                      "extension": "streamid_adapter"
                    }
                  ]
                }
              ],
              "data": [
                {
                  "name": "data",
                  "source": [
                    {
                      "extension": "message_collector"
                    }
                  ]
                }
              ]
            },
            {
              "extension": "streamid_adapter",
              "audio_frame": [
                {
                  "name": "pcm_frame",
                  "dest": [
                    {
                      "extension": "stt"
                    }
                  ]
                }
              ]
            },
            {
              "extension": "stt",
              "cmd": [
                {
                  "name": "flush",
                  "dest": [
                    {
                      "extension": "main_control"
                    }
                  ]
                }
              ]
            },
            {
              "extension": "llm",
              "cmd": [
                {
                  "names": [
                    "flush"
                  ],
                  "source": [
                    {
                      "extension": "main_control"
                    }
                  ]
                }
              ],
              "data": [
                {
                  "name": "text_data",
                  "source": [
                    {
                      "extension": "main_control"
                    }
                  ]
                }
              ]
            },
            {
              "extension": "tts",
              "data": [
                {
                  "name": "text_data",
                  "source": [
                    {
                      "extension": "llm"
                    }
                  ]
                },
                {
                  "name": "tts_audio_end",
                  "dest": [
                    {
                      "extension": "avatar"
                    }
                  ]
                }
              ],
              "audio_frame": [
                {
                  "name": "pcm_frame",
                  "dest": [
                    {
                      "extension": "avatar"
                    }
                  ]
                }
              ]
            }
          ]
        }
      },
      {
        "name": "inworld_test",
        "auto_start": false,
        "graph": {
          "nodes": [
            {
              "type": "extension",
              "name": "agora_rtc",
              "addon": "agora_rtc",
              "extension_group": "default",
              "property": {
                "app_id": "${env:AGORA_APP_ID}",
                "app_certificate": "${env:AGORA_APP_CERTIFICATE|}",
                "channel": "",
                "stream_id": 0,
                "remote_stream_id": 182837,
                "subscribe_audio": true,
                "publish_audio": true,
                "publish_data": true,
                "enable_agora_asr": false
              }
            },
            {
              "type": "extension",
              "name": "stt",
              "addon": "deepgram_ws_asr_python",
              "extension_group": "stt",
              "property": {
                "params": {
                  "api_key": "${env:DEEPGRAM_API_KEY}",
                  "url": "wss://api.deepgram.com/v2/listen",
                  "model": "flux-general-en",
                  "language": "en-US",
                  "interim_results": true,
                  "eot_threshold": 0.73,
                  "eot_timeout_ms": 2500,
                  "eager_eot_threshold": 0.0
                }
              }
            },
            {
              "type": "extension",
              "name": "llm",
              "addon": "openai_llm2_python",
              "extension_group": "chatgpt",
              "property": {
                "base_url": "https://api.openai.com/v1",
                "api_key": "${env:OPENAI_API_KEY}",
                "model": "gpt-5.1",
                "max_tokens": 1000,
                "prompt": "You are a friendly voice assistant testing Inworld TTS. Keep responses under 30 words.",
                "proxy_url": "${env:OPENAI_PROXY_URL|}",
                "greeting": "Hello! I'm testing the Inworld TTS service. How can I help you today?",
                "max_memory_length": 10,
                "use_max_completion_tokens": true
              }
            },
            {
              "type": "extension",
              "name": "tts",
              "addon": "inworld_http_tts",
              "extension_group": "tts",
              "property": {
                "dump": false,
                "dump_path": "./",
                "params": {
                  "api_key": "${env:INWORLD_TTS_API_KEY|}",
                  "voice": "Deborah",
                  "sampleRate": 16000,
                  "encoding": "LINEAR16"
                }
              }
            },
            {
              "type": "extension",
              "name": "main_control",
              "addon": "main_python",
              "extension_group": "control",
              "property": {
                "greeting": "Hello! I'm testing the Inworld TTS service. How can I help you today?"
              }
            },
            {
              "type": "extension",
              "name": "message_collector",
              "addon": "message_collector2",
              "extension_group": "transcriber",
              "property": {}
            },
            {
              "type": "extension",
              "name": "streamid_adapter",
              "addon": "streamid_adapter",
              "property": {}
            },
            {
              "type": "extension",
              "name": "avatar",
              "addon": "anam_avatar_python",
              "extension_group": "default",
              "property": {
                "anam_api_key": "${env:ANAM_API_KEY}",
                "anam_base_url": "https://api.anam.ai/v1",
                "anam_avatar_id": "81b70170-2e80-4e4b-a6fb-e04ac110dc4b",
                "anam_cluster": "",
                "anam_pod": "",
                "agora_appid": "${env:AGORA_APP_ID}",
                "agora_appcert": "${env:AGORA_APP_CERTIFICATE|}",
                "channel": "",
                "agora_video_uid": 123,
                "input_audio_sample_rate": 44100,
                "quality": "${env:VIDEO_QUALITY|high}",
                "video_encoding": "${env:VIDEO_ENCODING|H264}",
                "enable_string_uid": false,
                "activity_idle_timeout": 120
              }
            }
          ],
          "connections": [
            {
              "extension": "main_control",
              "cmd": [
                {
                  "names": [
                    "on_user_joined",
                    "on_user_left"
                  ],
                  "source": [
                    {
                      "extension": "agora_rtc"
                    }
                  ]
                },
                {
                  "name": "flush",
                  "source": [
                    {
                      "extension": "stt"
                    }
                  ]
                },
                {
                  "name": "flush",
                  "dest": [
                    {
                      "extension": "avatar"
                    }
                  ]
                }
              ],
              "data": [
                {
                  "name": "asr_result",
                  "source": [
                    {
                      "extension": "stt"
                    }
                  ]
                }
              ]
            },
            {
              "extension": "agora_rtc",
              "audio_frame": [
                {
                  "name": "pcm_frame",
                  "dest": [
                    {
                      "extension": "streamid_adapter"
                    }
                  ]
                }
              ],
              "data": [
                {
                  "name": "data",
                  "source": [
                    {
                      "extension": "message_collector"
                    }
                  ]
                }
              ]
            },
            {
              "extension": "streamid_adapter",
              "audio_frame": [
                {
                  "name": "pcm_frame",
                  "dest": [
                    {
                      "extension": "stt"
                    }
                  ]
                }
              ]
            },
            {
              "extension": "stt",
              "cmd": [
                {
                  "name": "flush",
                  "dest": [
                    {
                      "extension": "main_control"
                    }
                  ]
                }
              ]
            },
            {
              "extension": "llm",
              "cmd": [
                {
                  "names": [
                    "flush"
                  ],
                  "source": [
                    {
                      "extension": "main_control"
                    }
                  ]
                }
              ],
              "data": [
                {
                  "name": "text_data",
                  "source": [
                    {
                      "extension": "main_control"
                    }
                  ]
                }
              ]
            },
            {
              "extension": "tts",
              "data": [
                {
                  "name": "text_data",
                  "source": [
                    {
                      "extension": "llm"
                    }
                  ]
                },
                {
                  "name": "tts_audio_end",
                  "dest": [
                    {
                      "extension": "avatar"
                    }
                  ]
                }
              ],
              "audio_frame": [
                {
                  "name": "pcm_frame",
                  "dest": [
                    {
                      "extension": "avatar"
                    }
                  ]
                }
              ]
            }
          ]
        }
      },
      {
        "name": "inworld_simple",
        "auto_start": false,
        "graph": {
          "nodes": [
            {
              "type": "extension",
              "name": "agora_rtc",
              "addon": "agora_rtc",
              "extension_group": "default",
              "property": {
                "app_id": "${env:AGORA_APP_ID}",
                "app_certificate": "${env:AGORA_APP_CERTIFICATE|}",
                "channel": "",
                "stream_id": 0,
                "remote_stream_id": 182837,
                "subscribe_audio": true,
                "publish_audio": true,
                "publish_data": true,
                "enable_agora_asr": false
              }
            },
            {
              "type": "extension",
              "name": "stt",
              "addon": "deepgram_ws_asr_python",
              "extension_group": "stt",
              "property": {
                "params": {
                  "api_key": "${env:DEEPGRAM_API_KEY}",
                  "url": "wss://api.deepgram.com/v2/listen",
                  "model": "flux-general-en",
                  "language": "en-US",
                  "interim_results": true,
                  "eot_threshold": 0.73,
                  "eot_timeout_ms": 2500,
                  "eager_eot_threshold": 0.0
                }
              }
            },
            {
              "type": "extension",
              "name": "llm",
              "addon": "openai_llm2_python",
              "extension_group": "chatgpt",
              "property": {
                "base_url": "https://api.openai.com/v1",
                "api_key": "${env:OPENAI_API_KEY}",
                "model": "gpt-5.1",
                "max_tokens": 1000,
                "prompt": "You are a friendly voice assistant testing Inworld TTS. Keep responses under 30 words.",
                "proxy_url": "${env:OPENAI_PROXY_URL|}",
                "greeting": "Hello! I'm testing the Inworld TTS service. How can I help you today?",
                "max_memory_length": 10,
                "use_max_completion_tokens": true
              }
            },
            {
              "type": "extension",
              "name": "tts",
              "addon": "inworld_http_tts",
              "extension_group": "tts",
              "property": {
                "dump": false,
                "dump_path": "./",
                "params": {
                  "api_key": "${env:INWORLD_TTS_API_KEY|}",
                  "voice": "Deborah",
                  "sampleRate": 16000,
                  "encoding": "LINEAR16"
                }
              }
            },
            {
              "type": "extension",
              "name": "main_control",
              "addon": "main_python",
              "extension_group": "control",
              "property": {
                "greeting": "Hello! I'm testing the Inworld TTS service. How can I help you today?"
              }
            },
            {
              "type": "extension",
              "name": "message_collector",
              "addon": "message_collector2",
              "extension_group": "transcriber",
              "property": {}
            },
            {
              "type": "extension",
              "name": "streamid_adapter",
              "addon": "streamid_adapter",
              "property": {}
            }
          ],
          "connections": [
            {
              "extension": "main_control",
              "cmd": [
                {
                  "names": [
                    "on_user_joined",
                    "on_user_left"
                  ],
                  "source": [
                    {
                      "extension": "agora_rtc"
                    }
                  ]
                },
                {
                  "name": "flush",
                  "source": [
                    {
                      "extension": "stt"
                    }
                  ]
                }
              ],
              "data": [
                {
                  "name": "asr_result",
                  "source": [
                    {
                      "extension": "stt"
                    }
                  ]
                }
              ]
            },
            {
              "extension": "agora_rtc",
              "audio_frame": [
                {
                  "name": "pcm_frame",
                  "dest": [
                    {
                      "extension": "streamid_adapter"
                    }
                  ]
                },
                {
                  "name": "pcm_frame",
                  "source": [
                    {
                      "extension": "tts"
                    }
                  ]
                }
              ],
              "data": [
                {
                  "name": "data",
                  "source": [
                    {
                      "extension": "message_collector"
                    }
                  ]
                }
              ]
            },
            {
              "extension": "streamid_adapter",
              "audio_frame": [
                {
                  "name": "pcm_frame",
                  "dest": [
                    {
                      "extension": "stt"
                    }
                  ]
                }
              ]
            },
            {
              "extension": "stt",
              "cmd": [
                {
                  "name": "flush",
                  "dest": [
                    {
                      "extension": "main_control"
                    }
                  ]
                }
              ]
            },
            {
              "extension": "llm",
              "cmd": [
                {
                  "names": [
                    "flush"
                  ],
                  "source": [
                    {
                      "extension": "main_control"
                    }
                  ]
                }
              ],
              "data": [
                {
                  "name": "text_data",
                  "source": [
                    {
                      "extension": "main_control"
                    }
                  ]
                }
              ]
            },
            {
              "extension": "tts",
              "data": [
                {
                  "name": "text_data",
                  "source": [
                    {
                      "extension": "llm"
                    }
                  ]
                }
              ],
              "audio_frame": [
                {
                  "name": "pcm_frame",
                  "dest": [
                    {
                      "extension": "agora_rtc"
                    }
                  ]
                }
              ]
            }
          ]
        }
      }
    ]
  }
}