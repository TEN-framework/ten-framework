services:
  voice-assistant:
    build:
      context: ../../..
      dockerfile: agents/examples/voice-assistant-with-PowerMem/Dockerfile
    container_name: voice-assistant-with-powermem
    restart: unless-stopped
    ports:
      - "8080:8080"
      - "3000:3000"
    env_file:
      - ../../../.env
    environment:
      - DATABASE_PROVIDER=oceanbase
      - OCEANBASE_HOST=seekdb
      - OCEANBASE_PORT=2881
      - OCEANBASE_USER=root
      - OCEANBASE_PASSWORD=
      - OCEANBASE_DATABASE=powermem
      - OCEANBASE_COLLECTION=memories
    networks:
      - powermem_network
    depends_on:
      - seekdb

  seekdb:
    image: oceanbase/seekdb:latest
    container_name: seekdb
    restart: unless-stopped
    ports:
      - "2881:2881"
      - "2886:2886"
    volumes:
      - ./data:/var/lib/oceanbase
    environment:
      - SEEKDB_DATABASE=powermem
    networks:
      - powermem_network

networks:
  powermem_network:
    driver: bridge
